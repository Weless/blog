{"remainingRequest":"/Users/joey/joey/go_project/blog/frontend/node_modules/babel-loader/lib/index.js!/Users/joey/joey/go_project/blog/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/joey/joey/go_project/blog/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/joey/joey/go_project/blog/frontend/src/components/articleEditor/articleEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/joey/joey/go_project/blog/frontend/src/components/articleEditor/articleEditor.vue","mtime":1592381354586},{"path":"/Users/joey/joey/go_project/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE1hcmtlZCBmcm9tICJtYXJrZWQiOwppbXBvcnQgX2hpZ2hsaWdodCBmcm9tICJoaWdobGlnaHQuanMiOwppbXBvcnQgKiBhcyBxaW5pdSBmcm9tICJxaW5pdS1qcyI7CmltcG9ydCB7IEdldFFpbml1VG9rZW4sIERvbWFpbiwgY29uZmlnIH0gZnJvbSAiQC9hcGkvcWluaXUiOwppbXBvcnQgeyBTYXZlSW1nIH0gZnJvbSAiQC9hcGkvaW1nIjsKaW1wb3J0IHsgU2F2ZUFydGljbGUsIENoYW5nZUFydGljbGUsIEdldEFydGljbGUgfSBmcm9tICJAL2FwaS9hcnRpY2xlRWRpdG9yIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpc05ldzogewogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAogICAgYXJ0aWNsZUlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogIiIsCiAgICAgIHRhZ3M6ICIiLAogICAgICBuZXdUYWc6ICIiLAogICAgICBtZENvbnRlbnQ6ICIiLAogICAgICBhYnN0cmFjdDogIiIsCiAgICAgIGlzVXBsb2FkU2hvdzogZmFsc2UsCiAgICAgIHNob3dNb2RhbDogZmFsc2UsCiAgICAgIHNob3dMb2NhbFN0b3JhZ2VNb2RhbDogZmFsc2UsCiAgICAgIGZvcm06IHt9LAogICAgICB0aW1lcjogbnVsbCwKICAgICAgY2F0YWxvZzogW10sCiAgICAgIGNvbnRlbnQ6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRGVsZXRlVGFnOiBmdW5jdGlvbiBoYW5kbGVEZWxldGVUYWcoaW5kZXgpIHsKICAgICAgdGhpcy50YWdzLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgaGFuZGxlQWRkVGFnOiBmdW5jdGlvbiBoYW5kbGVBZGRUYWcoKSB7CiAgICAgIGlmICghdGhpcy5uZXdUYWcubGVuZ3RoKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLmi5Lnu53mt7vliqDnqbrmoIfnrb7vvIEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gaWYgKHRoaXMudGFncy5pbmNsdWRlcyh0aGlzLm5ld1RhZykpIHsKICAgICAgLy8gICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoIuaLkue7nea3u+WKoOmHjeWkjeagh+etvu+8gSIpOwogICAgICAvLyAgIHJldHVybjsKICAgICAgLy8gfQogICAgICAvLyB0aGlzLnRhZ3MucHVzaCh0aGlzLm5ld1RhZyk7CgoKICAgICAgdGhpcy50YWdzID0gdGhpcy5uZXdUYWc7CiAgICAgIHRoaXMubmV3VGFnID0gIiI7CiAgICB9LAogICAgc2V0TG9jYWxTdG9yYWdlOiBmdW5jdGlvbiBzZXRMb2NhbFN0b3JhZ2UoKSB7CiAgICAgIHZhciBhcnRpY2xlRGF0YSA9IHsKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICB0YWdzOiB0aGlzLnRhZ3MsCiAgICAgICAgYWJzdHJhY3Q6IHRoaXMuYWJzdHJhY3QsCiAgICAgICAgbWRDb250ZW50OiB0aGlzLm1kQ29udGVudAogICAgICB9OwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oIl9hcnRpY2xlIiwgSlNPTi5zdHJpbmdpZnkoYXJ0aWNsZURhdGEpKTsKICAgIH0sCiAgICBjcmVhdGVDYXRhbG9nOiBmdW5jdGlvbiBjcmVhdGVDYXRhbG9nKCkgewogICAgICB2YXIgdHJlZSA9IFtdOwogICAgICB2YXIgdGl0bGUgPSB7CiAgICAgICAgSDE6IDEsCiAgICAgICAgSDI6IDEsCiAgICAgICAgSDM6IDEsCiAgICAgICAgSDQ6IDEsCiAgICAgICAgSDU6IDEKICAgICAgfTsKICAgICAgdHJhdmVyc2VOb2RlKHRoaXMuJHJlZnNbImh0bWxDb250ZW50Il0pOwoKICAgICAgZnVuY3Rpb24gdHJhdmVyc2VOb2RlKG5vZGUpIHsKICAgICAgICB2YXIgdGFnID0gbm9kZS50YWdOYW1lLAogICAgICAgICAgICBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47CgogICAgICAgIGlmICh0aXRsZVt0YWddKSB7CiAgICAgICAgICB2YXIgaWQgPSB0YWcgKyAiLSIgKyB0aXRsZVt0YWddOwogICAgICAgICAgdHJlZS5wdXNoKHsKICAgICAgICAgICAgbGV2OiBwYXJzZUludCh0YWcuc2xpY2UoMSkpLAogICAgICAgICAgICB0ZXh0OiBub2RlLmlubmVyVGV4dCwKICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICB9KTsKICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKICAgICAgICAgIHRpdGxlW3RhZ10rKzsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgdHJhdmVyc2VOb2RlKGNoaWxkcmVuW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuY2F0YWxvZyA9IHRyZWU7CiAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuJHJlZnNbImh0bWxDb250ZW50Il0uaW5uZXJIVE1MOwogICAgfSwKICAgIHZhbGlkYXRlRm9ybTogZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGRhdGEpIHsKICAgICAgdmFyIGxpc3QgPSBbewogICAgICAgIHR5cGU6ICJ0aXRsZSIsCiAgICAgICAgbXNnOiAi6L+Y5rKh5YaZ5qCH6aKY5ZGi77yBIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogInRhZ3MiLAogICAgICAgIG1zZzogIuS4jeWKoOagh+etvuaAjuS5iOW9kuaho++8nyIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJjb250ZW50IiwKICAgICAgICBtc2c6ICLmraPmlofpg73msqHmnInlj5HkuKrllaXvvIHvvIEiCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAiYWJzdHJhY3QiLAogICAgICAgIG1zZzogIuWKoOS4iuaRmOimgemmlumhteaJjeWlveeci+WViu+8gSIKICAgICAgfV07CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdHlwZSA9IGxpc3RbaV0udHlwZTsKCiAgICAgICAgaWYgKCFkYXRhW3R5cGVdLmxlbmd0aCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihsaXN0W2ldLm1zZyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBjbGVhckZvcm06IGZ1bmN0aW9uIGNsZWFyRm9ybSgpIHsKICAgICAgdGhpcy50aXRsZSA9ICIiOwogICAgICB0aGlzLm1kQ29udGVudCA9ICIiOwogICAgICB0aGlzLnRhZ3MgPSAiIjsKICAgICAgdGhpcy5hYnN0cmFjdCA9ICIiOwogICAgfSwKICAgIGhhbmRsZVNlbmRBcnRpY2xlOiBmdW5jdGlvbiBoYW5kbGVTZW5kQXJ0aWNsZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnNldExvY2FsU3RvcmFnZSgpOwogICAgICB0aGlzLmNyZWF0ZUNhdGFsb2coKTsgLy8gbGV0IHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICAgIHZhciBhcnRpY2xlRGF0YSA9IHsKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICAvLyBkYXRlOiB0aW1lLAogICAgICAgIC8vIGxhc3REYXRlOiB0aW1lLAogICAgICAgIGNhdGVnb3J5OiB0aGlzLnRhZ3MsCiAgICAgICAgdmlld0NvdW50OiAwLAogICAgICAgIHN1bW1hcnk6IHRoaXMuYWJzdHJhY3QsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50LAogICAgICAgIG1kQ29udGVudDogdGhpcy5tZENvbnRlbnQgLy8gdHlwZTogdHlwZSwKICAgICAgICAvLyBjYXRhbG9nOiB0aGlzLmNhdGFsb2cKCiAgICAgIH07CgogICAgICBpZiAoIXRoaXMudmFsaWRhdGVGb3JtKGFydGljbGVEYXRhKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgU2F2ZUFydGljbGUoYXJ0aWNsZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLnJlc01zZyk7CgogICAgICAgIF90aGlzMi5jbGVhckZvcm0oKTsKCiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJfYXJ0aWNsZSIpOyAvLyDnp7vpmaTlrZjmoaMKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUNoYW5nZUFydGljbGU6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZUFydGljbGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5zZXRMb2NhbFN0b3JhZ2UoKTsKICAgICAgdGhpcy5jcmVhdGVDYXRhbG9nKCk7CiAgICAgIHZhciBuZXdEYXRhID0gewogICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAgIHRhZ3M6IHRoaXMudGFncywKICAgICAgICBsYXN0RGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgYWJzdHJhY3Q6IHRoaXMuYWJzdHJhY3QsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50LAogICAgICAgIG1kQ29udGVudDogdGhpcy5tZENvbnRlbnQsCiAgICAgICAgY2F0YWxvZzogdGhpcy5jYXRhbG9nCiAgICAgIH07CiAgICAgIENoYW5nZUFydGljbGUoewogICAgICAgIF9pZDogdGhpcy5hcnRpY2xlSWQsCiAgICAgICAgbmV3RGF0YTogbmV3RGF0YQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuc2hvd01vZGFsID0gdHJ1ZTsKICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIl9hcnRpY2xlIik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCiAgICBhdXRvU2F2ZTogZnVuY3Rpb24gYXV0b1NhdmUoKSB7CiAgICAgIGlmICh0aGlzLnRpdGxlLmxlbmd0aCB8fCAvLyB0aGlzLnRhZ3MubGVuZ3RoIHx8CiAgICAgIHRoaXMubWRDb250ZW50Lmxlbmd0aCB8fCB0aGlzLmFic3RyYWN0Lmxlbmd0aCkgewogICAgICAgIHRoaXMuc2V0TG9jYWxTdG9yYWdlKCk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLoh6rliqjkv53lrZjmiJDlip/vvIEiKTsKICAgICAgfQoKICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQodGhpcy5hdXRvU2F2ZSwgMTAwMCAqIDYwKTsKICAgIH0sCiAgICBtb2RhbExvY2FsU3RvcmFnZUNsaWNrQ2FuY2VsOiBmdW5jdGlvbiBtb2RhbExvY2FsU3RvcmFnZUNsaWNrQ2FuY2VsKCkgewogICAgICB0aGlzLnNob3dMb2NhbFN0b3JhZ2VNb2RhbCA9IGZhbHNlOwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIl9hcnRpY2xlIik7CiAgICAgIHRoaXMuYXV0b1NhdmUoKTsKICAgIH0sCiAgICBtb2RhbExvY2FsU3RvcmFnZUNsaWNrT2s6IGZ1bmN0aW9uIG1vZGFsTG9jYWxTdG9yYWdlQ2xpY2tPaygpIHsKICAgICAgdGhpcy5zaG93TG9jYWxTdG9yYWdlTW9kYWwgPSBmYWxzZTsKICAgICAgdmFyIGFydGljbGVEYXRhID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oIl9hcnRpY2xlIikpOwogICAgICB0aGlzLnRpdGxlID0gYXJ0aWNsZURhdGEudGl0bGU7CiAgICAgIHRoaXMudGFncyA9IGFydGljbGVEYXRhLnRhZ3M7CiAgICAgIHRoaXMuYWJzdHJhY3QgPSBhcnRpY2xlRGF0YS5hYnN0cmFjdDsKICAgICAgdGhpcy5tZENvbnRlbnQgPSBhcnRpY2xlRGF0YS5tZENvbnRlbnQ7CiAgICAgIHRoaXMuYXV0b1NhdmUoKTsKICAgIH0sCiAgICBjaGVja0lzU2FtZUFzTG9jYWxTdG9yYWdlOiBmdW5jdGlvbiBjaGVja0lzU2FtZUFzTG9jYWxTdG9yYWdlKCkgewogICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJfYXJ0aWNsZSIpKSB7CiAgICAgICAgdmFyIGFydGljbGVEYXRhID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oIl9hcnRpY2xlIikpOwoKICAgICAgICBpZiAoYXJ0aWNsZURhdGEudGl0bGUgIT09IHRoaXMudGl0bGUgfHwgLy8gYXJ0aWNsZURhdGEudGFncy5qb2luKCIiKSAhPT0gdGhpcy50YWdzLmpvaW4oIiIpIHx8CiAgICAgICAgYXJ0aWNsZURhdGEubWRDb250ZW50ICE9PSB0aGlzLm1kQ29udGVudCB8fCBhcnRpY2xlRGF0YS5hYnN0cmFjdCAhPT0gdGhpcy5hYnN0cmFjdCkgewogICAgICAgICAgdGhpcy5zaG93TG9jYWxTdG9yYWdlTW9kYWwgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF1dG9TYXZlKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXV0b1NhdmUoKTsKICAgICAgfQogICAgfSwKICAgIHVwbG9hZEltZ0NsaWNrOiBmdW5jdGlvbiB1cGxvYWRJbWdDbGljaygpIHsKICAgICAgdGhpcy4kcmVmcy5pbWdJbnB1dC5jbGljaygpOwogICAgfSwKICAgIHVwbG9hZEltZzogZnVuY3Rpb24gdXBsb2FkSW1nKGV2ZW50KSB7CiAgICAgIHZhciBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlczsKCiAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBmaWxlID0gZmlsZXNbMF07IC8v5paH5Lu25ZCNKOWKoOS4gOS4quWJjee8gOebuOW9k+S6juebruW9lSkKCiAgICAgIHZhciBmaWxlbmFtZSA9ICJtZEltZy8iICsgYnRvYShEYXRlLm5vdygpKSArIGZpbGUubmFtZTsKICAgICAgdmFyIHB1dEV4dHJhID0gewogICAgICAgIGZuYW1lOiBmaWxlbmFtZSwKICAgICAgICBwYXJhbXM6IHt9LAogICAgICAgIG1pbWVUeXBlOiBudWxsCiAgICAgIH07CiAgICAgIHZhciBjb21wbGV0ZVVybCA9ICIiOwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBvYnNlcnZlciA9IHsKICAgICAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB9LAogICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSwKICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUocmVzKSB7CiAgICAgICAgICB2YXIga2V5ID0gcmVzLmtleTsKICAgICAgICAgIGNvbXBsZXRlVXJsID0gIiIuY29uY2F0KERvbWFpbiwgIi8iKS5jb25jYXQoa2V5KTsKICAgICAgICAgIHNlbGYubWRDb250ZW50ICs9ICIhWyIuY29uY2F0KGZpbGVuYW1lLCAiXSgiKS5jb25jYXQoY29tcGxldGVVcmwsICIpIik7CiAgICAgICAgICB2YXIgaW1nRGF0YSA9IHsKICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lLAogICAgICAgICAgICB1cmw6IGNvbXBsZXRlVXJsCiAgICAgICAgICB9OwogICAgICAgICAgU2F2ZUltZyhpbWdEYXRhKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi4kbWVzc2FnZS5zdWNjZXNzKCLlm77niYfkuIrkvKDmiJDlip/vvIEiKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgICAgR2V0UWluaXVUb2tlbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciB0b2tlbiA9IHJlcy5kYXRhLnJlc0RhdGEucWluaXVUb2tlbjsKICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBmaWxlbmFtZSwgdG9rZW4sIHB1dEV4dHJhLCBjb25maWcpOwogICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKTsKICAgICAgfSk7CiAgICB9LAogICAgbW9kYWxDbGlja09rOiBmdW5jdGlvbiBtb2RhbENsaWNrT2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL2FkbWluIgogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBodG1sVGV4dDogZnVuY3Rpb24gaHRtbFRleHQoKSB7CiAgICAgIHJldHVybiBNYXJrZWQodGhpcy5tZENvbnRlbnQpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIE1hcmtlZC5zZXRPcHRpb25zKHsKICAgICAgcmVuZGVyZXI6IG5ldyBNYXJrZWQuUmVuZGVyZXIoKSwKICAgICAgc21hcnRMaXN0czogdHJ1ZSwKICAgICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiBoaWdobGlnaHQoY29kZSkgewogICAgICAgIHJldHVybiBfaGlnaGxpZ2h0LmhpZ2hsaWdodEF1dG8oY29kZSkudmFsdWU7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIG1kQ29udGVudCA9IHRoaXMuJHJlZnMubWRDb250ZW50LiRlbDsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIG1kQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciByZWFsQXJlYSA9IHRoaXMuY2hpbGRyZW5bMF07CiAgICAgIHZhciBzY3JvbGxUb3AgPSByZWFsQXJlYS5zY3JvbGxUb3A7CiAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSByZWFsQXJlYS5zY3JvbGxIZWlnaHQgLSByZWFsQXJlYS5vZmZzZXRIZWlnaHQ7CiAgICAgIHZhciBodG1sQ29udGVudCA9IF90aGlzLiRyZWZzLmh0bWxDb250ZW50OwogICAgICBodG1sQ29udGVudC5zY3JvbGxUb3AgPSAoaHRtbENvbnRlbnQuc2Nyb2xsSGVpZ2h0IC0gaHRtbENvbnRlbnQub2Zmc2V0SGVpZ2h0KSAqIChzY3JvbGxUb3AgLyBzY3JvbGxIZWlnaHQpOwogICAgfSwgdHJ1ZSk7CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgaWYgKCF0aGlzLmlzTmV3KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYXJ0aWNsZUlkKQogICAgICBHZXRBcnRpY2xlKHsKICAgICAgICBfaWQ6IHRoaXMuYXJ0aWNsZUlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgdmFyIGFydGljbGVEYXRhID0gcmVzLmRhdGEuZGF0YS5hcnRpY2xlOwogICAgICAgIF90aGlzNC50aXRsZSA9IGFydGljbGVEYXRhLlRpdGxlOwogICAgICAgIF90aGlzNC50YWdzID0gYXJ0aWNsZURhdGEuTmFtZTsKICAgICAgICBfdGhpczQubWRDb250ZW50ID0gYXJ0aWNsZURhdGEuQ29udGVudDsKICAgICAgICBfdGhpczQuYWJzdHJhY3QgPSBhcnRpY2xlRGF0YS5TdW1tYXJ5OwoKICAgICAgICBfdGhpczQuY2hlY2tJc1NhbWVBc0xvY2FsU3RvcmFnZSgpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY2hlY2tJc1NhbWVBc0xvY2FsU3RvcmFnZSgpOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICB9Cn07"},{"version":3,"sources":["articleEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA,OAAA,MAAA,MAAA,QAAA;AACA,OAAA,UAAA,MAAA,cAAA;AACA,OAAA,KAAA,KAAA,MAAA,UAAA;AACA,SAAA,aAAA,EAAA,MAAA,EAAA,MAAA,QAAA,aAAA;AACA,SAAA,OAAA,QAAA,WAAA;AACA,SAAA,WAAA,EAAA,aAAA,EAAA,UAAA,QAAA,qBAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAJA,GADA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAIA,MAAA,SAAA,EAAA,EAJA;AAKA,MAAA,QAAA,EAAA,EALA;AAMA,MAAA,YAAA,EAAA,KANA;AAOA,MAAA,SAAA,EAAA,KAPA;AAQA,MAAA,qBAAA,EAAA,KARA;AASA,MAAA,IAAA,EAAA,EATA;AAUA,MAAA,KAAA,EAAA,IAVA;AAWA,MAAA,OAAA,EAAA,EAXA;AAYA,MAAA,OAAA,EAAA;AAZA,KAAA;AAcA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,KADA,EACA;AACA,WAAA,IAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AACA,UAAA,CAAA,KAAA,MAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,UAAA;AACA;AACA,OAJA,CAKA;AACA;AACA;AACA;AACA;;;AACA,WAAA,IAAA,GAAA,KAAA,MAAA;AACA,WAAA,MAAA,GAAA,EAAA;AACA,KAhBA;AAiBA,IAAA,eAjBA,6BAiBA;AACA,UAAA,WAAA,GAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,IAAA,EAAA,KAAA,IAFA;AAGA,QAAA,QAAA,EAAA,KAAA,QAHA;AAIA,QAAA,SAAA,EAAA,KAAA;AAJA,OAAA;AAMA,MAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,WAAA,CAAA;AACA,KAzBA;AA0BA,IAAA,aA1BA,2BA0BA;AACA,UAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,GAAA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OAAA;AACA,MAAA,YAAA,CAAA,KAAA,KAAA,CAAA,aAAA,CAAA,CAAA;;AAEA,eAAA,YAAA,CAAA,IAAA,EAAA;AACA,YAAA,GAAA,GAAA,IAAA,CAAA,OAAA;AAAA,YACA,QAAA,GAAA,IAAA,CAAA,QADA;;AAGA,YAAA,KAAA,CAAA,GAAA,CAAA,EAAA;AACA,cAAA,EAAA,GAAA,GAAA,GAAA,GAAA,GAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,IAAA,CAAA,IAAA,CAAA;AACA,YAAA,GAAA,EAAA,QAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAAA,CAAA,CADA;AAEA,YAAA,IAAA,EAAA,IAAA,CAAA,SAFA;AAGA,YAAA,EAAA,EAAA;AAHA,WAAA;AAKA,UAAA,IAAA,CAAA,YAAA,CAAA,IAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,GAAA,CAAA;AACA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,GAAA,GAAA,QAAA,CAAA,MAAA,EAAA,CAAA,GAAA,GAAA,EAAA,CAAA,EAAA,EAAA;AACA,UAAA,YAAA,CAAA,QAAA,CAAA,CAAA,CAAA,CAAA;AACA;AACA;;AAEA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,OAAA,GAAA,KAAA,KAAA,CAAA,aAAA,EAAA,SAAA;AACA,KApDA;AAqDA,IAAA,YArDA,wBAqDA,IArDA,EAqDA;AACA,UAAA,IAAA,GAAA,CACA;AAAA,QAAA,IAAA,EAAA,OAAA;AAAA,QAAA,GAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,IAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,IAAA,EAAA,SAAA;AAAA,QAAA,GAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,IAAA,EAAA,UAAA;AAAA,QAAA,GAAA,EAAA;AAAA,OAJA,CAAA;;AAMA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,IAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,IAAA,GAAA,IAAA,CAAA,CAAA,CAAA,CAAA,IAAA;;AACA,YAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,MAAA,EAAA;AACA,eAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,GAAA;AACA,iBAAA,KAAA;AACA;AACA;;AACA,aAAA,IAAA;AACA,KApEA;AAqEA,IAAA,SArEA,uBAqEA;AACA,WAAA,KAAA,GAAA,EAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,WAAA,IAAA,GAAA,EAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,KA1EA;AA2EA,IAAA,iBA3EA,+BA2EA;AAAA;;AACA,WAAA,eAAA;AACA,WAAA,aAAA,GAFA,CAGA;;AACA,UAAA,WAAA,GAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA;AACA;AACA,QAAA,QAAA,EAAA,KAAA,IAJA;AAKA,QAAA,SAAA,EAAA,CALA;AAMA,QAAA,OAAA,EAAA,KAAA,QANA;AAOA,QAAA,OAAA,EAAA,KAAA,OAPA;AAQA,QAAA,SAAA,EAAA,KAAA,SARA,CASA;AACA;;AAVA,OAAA;;AAYA,UAAA,CAAA,KAAA,YAAA,CAAA,WAAA,CAAA,EAAA;AACA;AACA;;AACA,MAAA,WAAA,CAAA,WAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,MAAA;;AACA,QAAA,MAAA,CAAA,SAAA;;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,UAAA,CAAA,UAAA,EAHA,CAGA;AACA,OALA,EAMA,KANA,CAMA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OARA;AASA,KAvGA;AAwGA,IAAA,mBAxGA,iCAwGA;AAAA;;AACA,WAAA,eAAA;AACA,WAAA,aAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,IAAA,EAAA,KAAA,IAFA;AAGA,QAAA,QAAA,EAAA,IAAA,IAAA,GAAA,OAAA,EAHA;AAIA,QAAA,QAAA,EAAA,KAAA,QAJA;AAKA,QAAA,OAAA,EAAA,KAAA,OALA;AAMA,QAAA,SAAA,EAAA,KAAA,SANA;AAOA,QAAA,OAAA,EAAA,KAAA;AAPA,OAAA;AASA,MAAA,aAAA,CAAA;AAAA,QAAA,GAAA,EAAA,KAAA,SAAA;AAAA,QAAA,OAAA,EAAA;AAAA,OAAA,CAAA,CACA,IADA,CACA,YAAA;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,IAAA;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,UAAA,CAAA,UAAA;AACA,OAJA,EAKA,KALA,CAKA,YAAA,CAAA,CALA;AAMA,KA1HA;AA2HA,IAAA,QA3HA,sBA2HA;AACA,UACA,KAAA,KAAA,CAAA,MAAA,IACA;AACA,WAAA,SAAA,CAAA,MAFA,IAGA,KAAA,QAAA,CAAA,MAJA,EAKA;AACA,aAAA,eAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,SAAA;AACA;;AACA,WAAA,KAAA,GAAA,UAAA,CAAA,KAAA,QAAA,EAAA,OAAA,EAAA,CAAA;AACA,KAtIA;AAuIA,IAAA,4BAvIA,0CAuIA;AACA,WAAA,qBAAA,GAAA,KAAA;AACA,MAAA,MAAA,CAAA,YAAA,CAAA,UAAA,CAAA,UAAA;AACA,WAAA,QAAA;AACA,KA3IA;AA4IA,IAAA,wBA5IA,sCA4IA;AACA,WAAA,qBAAA,GAAA,KAAA;AACA,UAAA,WAAA,GAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA;AACA,WAAA,KAAA,GAAA,WAAA,CAAA,KAAA;AACA,WAAA,IAAA,GAAA,WAAA,CAAA,IAAA;AACA,WAAA,QAAA,GAAA,WAAA,CAAA,QAAA;AACA,WAAA,SAAA,GAAA,WAAA,CAAA,SAAA;AACA,WAAA,QAAA;AACA,KApJA;AAqJA,IAAA,yBArJA,uCAqJA;AACA,UAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,WAAA,GAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA;;AACA,YACA,WAAA,CAAA,KAAA,KAAA,KAAA,KAAA,IACA;AACA,QAAA,WAAA,CAAA,SAAA,KAAA,KAAA,SAFA,IAGA,WAAA,CAAA,QAAA,KAAA,KAAA,QAJA,EAKA;AACA,eAAA,qBAAA,GAAA,IAAA;AACA,SAPA,MAOA;AACA,eAAA,QAAA;AACA;AACA,OAZA,MAYA;AACA,aAAA,QAAA;AACA;AACA,KArKA;AAsKA,IAAA,cAtKA,4BAsKA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,KAAA;AACA,KAxKA;AAyKA,IAAA,SAzKA,qBAyKA,KAzKA,EAyKA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA;;AACA,UAAA,KAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA;AACA;;AACA,UAAA,IAAA,GAAA,KAAA,CAAA,CAAA,CAAA,CALA,CAOA;;AACA,UAAA,QAAA,GAAA,WAAA,IAAA,CAAA,IAAA,CAAA,GAAA,EAAA,CAAA,GAAA,IAAA,CAAA,IAAA;AACA,UAAA,QAAA,GAAA;AACA,QAAA,KAAA,EAAA,QADA;AAEA,QAAA,MAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAAA;AAKA,UAAA,WAAA,GAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA;AAEA,UAAA,QAAA,GAAA;AACA,QAAA,IADA,gBACA,GADA,EACA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,SAHA;AAIA,QAAA,KAJA,iBAIA,GAJA,EAIA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,SANA;AAOA,QAAA,QAPA,oBAOA,GAPA,EAOA;AAAA,cACA,GADA,GACA,GADA,CACA,GADA;AAEA,UAAA,WAAA,aAAA,MAAA,cAAA,GAAA,CAAA;AACA,UAAA,IAAA,CAAA,SAAA,gBAAA,QAAA,eAAA,WAAA;AACA,cAAA,OAAA,GAAA;AACA,YAAA,QAAA,EAAA,QADA;AAEA,YAAA,GAAA,EAAA;AAFA,WAAA;AAIA,UAAA,OAAA,CAAA,OAAA,CAAA,CAAA,IAAA,CAAA,YAAA;AACA,YAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA,SAAA;AACA,WAFA;AAGA;AAlBA,OAAA;AAoBA,MAAA,aAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA;AACA,YAAA,UAAA,GAAA,KAAA,CAAA,MAAA,CAAA,IAAA,EAAA,QAAA,EAAA,KAAA,EAAA,QAAA,EAAA,MAAA,CAAA;AACA,QAAA,UAAA,CAAA,SAAA,CAAA,QAAA;AACA,OAJA;AAKA,KAnNA;AAoNA,IAAA,YApNA,0BAoNA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA;AAtNA,GA1BA;AAkPA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,MAAA,CAAA,KAAA,SAAA,CAAA;AACA;AAHA,GAlPA;AAuPA,EAAA,OAvPA,qBAuPA;AACA,IAAA,MAAA,CAAA,UAAA,CAAA;AACA,MAAA,QAAA,EAAA,IAAA,MAAA,CAAA,QAAA,EADA;AAEA,MAAA,UAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA,mBAAA,IAAA,EAAA;AACA,eAAA,UAAA,CAAA,aAAA,CAAA,IAAA,EAAA,KAAA;AACA;AALA,KAAA;AAQA,QAAA,SAAA,GAAA,KAAA,KAAA,CAAA,SAAA,CAAA,GAAA;;AACA,QAAA,KAAA,GAAA,IAAA;;AACA,IAAA,SAAA,CAAA,gBAAA,CACA,QADA,EAEA,YAAA;AACA,UAAA,QAAA,GAAA,KAAA,QAAA,CAAA,CAAA,CAAA;AACA,UAAA,SAAA,GAAA,QAAA,CAAA,SAAA;AACA,UAAA,YAAA,GAAA,QAAA,CAAA,YAAA,GAAA,QAAA,CAAA,YAAA;AACA,UAAA,WAAA,GAAA,KAAA,CAAA,KAAA,CAAA,WAAA;AACA,MAAA,WAAA,CAAA,SAAA,GACA,CAAA,WAAA,CAAA,YAAA,GAAA,WAAA,CAAA,YAAA,KACA,SAAA,GAAA,YADA,CADA;AAGA,KAVA,EAWA,IAXA;AAaA,GA/QA;AAgRA,EAAA,OAhRA,qBAgRA;AAAA;;AACA,QAAA,CAAA,KAAA,KAAA,EAAA;AACA;AACA,MAAA,UAAA,CAAA;AAAA,QAAA,GAAA,EAAA,KAAA;AAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,YAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,WAAA,CAAA,KAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,WAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,WAAA,CAAA,OAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,WAAA,CAAA,OAAA;;AACA,QAAA,MAAA,CAAA,yBAAA;AACA,OARA;AASA,KAXA,MAWA;AACA,WAAA,yBAAA;AACA;AACA,GA/RA;AAgSA,EAAA,aAhSA,2BAgSA;AACA,IAAA,YAAA,CAAA,KAAA,KAAA,CAAA;AACA;AAlSA,CAAA","sourcesContent":["<template>\n  <div class=\"editor\">\n    <el-form :inline=\"true\" class=\"editor-row\">\n      <el-form-item label=\"文章标题：\">\n        <el-input\n          placeholder=\"文章标题...\"\n          class=\"title-input\"\n          v-model=\"title\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"添加标签：\">\n        <el-input placeholder=\"标签...\" class=\"title-input\" v-model=\"newTag\">\n          <el-button\n            slot=\"append\"\n            type=\"primary\"\n            icon=\"el-icon-plus\"\n            @click=\"handleAddTag\"\n          ></el-button>\n        </el-input>\n      </el-form-item>\n    </el-form>\n\n    <el-row class=\"editor-row\">\n      <el-col>\n        <span>文章标签：</span>\n        <el-tag\n          closable\n          type=\"info\"\n          size=\"mini\"\n          v-for=\"(tag, index) in tags\"\n          :key=\"index\"\n          @close=\"handleDeleteTag(index)\"\n          >{{ tag }}</el-tag\n        >\n      </el-col>\n    </el-row>\n\n    <el-row class=\"editor-row\" :gutter=\"30\">\n      <el-col :span=\"12\" class=\"content-md\">\n        <el-input\n          type=\"textarea\"\n          class=\"content-textarea\"\n          placeholder=\"正文\"\n          v-model=\"mdContent\"\n          ref=\"mdContent\"\n        ></el-input>\n        <div class=\"img-upload\">\n          <i\n            class=\"el-icon-picture\"\n            v-show=\"!isUploadShow\"\n            @click=\"isUploadShow = true\"\n          ></i>\n          <i\n            class=\"el-icon-close\"\n            v-show=\"isUploadShow\"\n            @click=\"isUploadShow = false\"\n          ></i>\n          <!-- <el-upload\n            class=\"upload-demo\"\n            drag\n            action=\"https://jsonplaceholder.typicode.com/posts/\"\n            multiple\n            v-show=\"isUploadShow\"\n          >\n            <i class=\"el-icon-upload\"></i>\n            <div class=\"el-upload__text\">\n              将文件拖到此处，或<em>点击上传</em>\n            </div>\n          </el-upload> -->\n\n          <div class=\"img-form\" v-show=\"isUploadShow\" @click=\"uploadImgClick\">\n            <input\n              class=\"img-input\"\n              type=\"file\"\n              ref=\"imgInput\"\n              @change=\"uploadImg\"\n            />\n            <div class=\"img-content\">\n              <div class=\"text\">点击或者拖拽上传图片</div>\n              <i class=\"el-icon-upload\"></i>\n            </div>\n          </div>\n        </div>\n      </el-col>\n      <el-col :span=\"12\">\n        <div class=\"content-show\" v-html=\"htmlText\" ref=\"htmlContent\"></div>\n      </el-col>\n    </el-row>\n\n    <el-row class=\"editor-row\" :gutter=\"30\">\n      <el-col>\n        <span class=\"text title-text\">文章摘要：</span>\n        <el-input\n          class=\"digest-textarea\"\n          :rows=\"3\"\n          placeholder=\"文章摘要...\"\n          type=\"textarea\"\n          v-model=\"abstract\"\n        />\n      </el-col>\n    </el-row>\n\n    <div class=\"editor-row\">\n      <el-button v-if=\"isNew\" type=\"success\" @click=\"handleSendArticle()\"\n        >发布</el-button\n      >\n      <!-- <el-button v-if=\"isNew\" type=\"success\" @click=\"handleSendArticle(1)\"\n        >私密发布</el-button\n      > -->\n      <el-button v-if=\"!isNew\" type=\"success\" @click=\"handleChangeArticle()\"\n        >发布修改</el-button\n      >\n    </div>\n\n    <el-dialog :visible.sync=\"showModal\" title=\"修改成功\">\n      <p>是否返回【内容管理页面】？</p>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showModal = !showModal\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"modalClickOk\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog\n      title=\"本地存档\"\n      :visible.sync=\"showLocalStorageModal\"\n      width=\"30%\"\n    >\n      <p>检测到有未发布的本地存档，是否恢复存档继续上次的编辑？</p>\n      <p>ps:取消则会删除本地存档!</p>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"modalLocalStorageClickCancel\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"modalLocalStorageClickOk\"\n          >确 定</el-button\n        >\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport Marked from \"marked\";\nimport highlight from \"highlight.js\";\nimport * as qiniu from \"qiniu-js\";\nimport { GetQiniuToken, Domain, config } from \"@/api/qiniu\";\nimport { SaveImg } from \"@/api/img\";\nimport { SaveArticle, ChangeArticle, GetArticle } from \"@/api/articleEditor\";\n\nexport default {\n  props: {\n    isNew: {\n      type: Boolean\n    },\n    articleId: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data() {\n    return {\n      title: \"\",\n      tags: \"\",\n      newTag: \"\",\n      mdContent: \"\",\n      abstract: \"\",\n      isUploadShow: false,\n      showModal: false,\n      showLocalStorageModal: false,\n      form: {},\n      timer: null,\n      catalog: [],\n      content: \"\"\n    };\n  },\n  methods: {\n    handleDeleteTag(index) {\n      this.tags.splice(index, 1);\n    },\n    handleAddTag() {\n      if (!this.newTag.length) {\n        this.$message.warning(\"拒绝添加空标签！\");\n        return;\n      }\n      // if (this.tags.includes(this.newTag)) {\n      //   this.$message.warning(\"拒绝添加重复标签！\");\n      //   return;\n      // }\n      // this.tags.push(this.newTag);\n      this.tags = this.newTag;\n      this.newTag = \"\";\n    },\n    setLocalStorage() {\n      let articleData = {\n        title: this.title,\n        tags: this.tags,\n        abstract: this.abstract,\n        mdContent: this.mdContent\n      };\n      window.localStorage.setItem(\"_article\", JSON.stringify(articleData));\n    },\n    createCatalog() {\n      let tree = [];\n      const title = { H1: 1, H2: 1, H3: 1, H4: 1, H5: 1 };\n      traverseNode(this.$refs[\"htmlContent\"]);\n\n      function traverseNode(node) {\n        let tag = node.tagName,\n          children = node.children;\n\n        if (title[tag]) {\n          let id = tag + \"-\" + title[tag];\n          tree.push({\n            lev: parseInt(tag.slice(1)),\n            text: node.innerText,\n            id: id\n          });\n          node.setAttribute(\"id\", id);\n          title[tag]++;\n        }\n        for (let i = 0, len = children.length; i < len; i++) {\n          traverseNode(children[i]);\n        }\n      }\n\n      this.catalog = tree;\n      this.content = this.$refs[\"htmlContent\"].innerHTML;\n    },\n    validateForm(data) {\n      const list = [\n        { type: \"title\", msg: \"还没写标题呢！\" },\n        { type: \"tags\", msg: \"不加标签怎么归档？\" },\n        { type: \"content\", msg: \"正文都没有发个啥！！\" },\n        { type: \"abstract\", msg: \"加上摘要首页才好看啊！\" }\n      ];\n      for (let i = 0; i < list.length; i++) {\n        let type = list[i].type;\n        if (!data[type].length) {\n          this.$message.error(list[i].msg);\n          return false;\n        }\n      }\n      return true;\n    },\n    clearForm() {\n      this.title = \"\";\n      this.mdContent = \"\";\n      this.tags = \"\";\n      this.abstract = \"\";\n    },\n    handleSendArticle() {\n      this.setLocalStorage();\n      this.createCatalog();\n      // let time = new Date().getTime();\n      let articleData = {\n        title: this.title,\n        // date: time,\n        // lastDate: time,\n        category: this.tags,\n        viewCount: 0,\n        summary: this.abstract,\n        content: this.content,\n        mdContent: this.mdContent,\n        // type: type,\n        // catalog: this.catalog\n      };\n      if (!this.validateForm(articleData)) {\n        return;\n      }\n      SaveArticle(articleData)\n        .then(res => {\n          this.$message.success(res.data.resMsg);\n          this.clearForm();\n          window.localStorage.removeItem(\"_article\"); // 移除存档\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n    handleChangeArticle() {\n      this.setLocalStorage();\n      this.createCatalog();\n      let newData = {\n        title: this.title,\n        tags: this.tags,\n        lastDate: new Date().getTime(),\n        abstract: this.abstract,\n        content: this.content,\n        mdContent: this.mdContent,\n        catalog: this.catalog\n      };\n      ChangeArticle({ _id: this.articleId, newData: newData })\n        .then(() => {\n          this.showModal = true;\n          window.localStorage.removeItem(\"_article\");\n        })\n        .catch(() => {});\n    },\n    autoSave() {\n      if (\n        this.title.length ||\n        // this.tags.length ||\n        this.mdContent.length ||\n        this.abstract.length\n      ) {\n        this.setLocalStorage();\n        this.$message.success(\"自动保存成功！\");\n      }\n      this.timer = setTimeout(this.autoSave, 1000 * 60);\n    },\n    modalLocalStorageClickCancel() {\n      this.showLocalStorageModal = false;\n      window.localStorage.removeItem(\"_article\");\n      this.autoSave();\n    },\n    modalLocalStorageClickOk() {\n      this.showLocalStorageModal = false;\n      let articleData = JSON.parse(window.localStorage.getItem(\"_article\"));\n      this.title = articleData.title;\n      this.tags = articleData.tags;\n      this.abstract = articleData.abstract;\n      this.mdContent = articleData.mdContent;\n      this.autoSave();\n    },\n    checkIsSameAsLocalStorage() {\n      if (window.localStorage.getItem(\"_article\")) {\n        let articleData = JSON.parse(window.localStorage.getItem(\"_article\"));\n        if (\n          articleData.title !== this.title ||\n          // articleData.tags.join(\"\") !== this.tags.join(\"\") ||\n          articleData.mdContent !== this.mdContent ||\n          articleData.abstract !== this.abstract\n        ) {\n          this.showLocalStorageModal = true;\n        } else {\n          this.autoSave();\n        }\n      } else {\n        this.autoSave();\n      }\n    },\n    uploadImgClick() {\n      this.$refs.imgInput.click();\n    },\n    uploadImg(event) {\n      let files = event.target.files;\n      if (files.length === 0) {\n        return;\n      }\n      let file = files[0];\n\n      //文件名(加一个前缀相当于目录)\n      let filename = \"mdImg/\" + btoa(Date.now()) + file.name;\n      let putExtra = {\n        fname: filename,\n        params: {},\n        mimeType: null\n      };\n      let completeUrl = \"\";\n      let self = this;\n\n      let observer = {\n        next(res) {\n          console.log(res);\n        },\n        error(err) {\n          console.log(err);\n        },\n        complete(res) {\n          let { key } = res;\n          completeUrl = `${Domain}/${key}`;\n          self.mdContent += `![${filename}](${completeUrl})`;\n          let imgData = {\n            filename,\n            url: completeUrl\n          };\n          SaveImg(imgData).then(() => {\n            self.$message.success(\"图片上传成功！\");\n          });\n        }\n      };\n      GetQiniuToken().then(res => {\n        let token = res.data.resData.qiniuToken;\n        let observable = qiniu.upload(file, filename, token, putExtra, config);\n        observable.subscribe(observer);\n      });\n    },\n    modalClickOk() {\n      this.$router.push({ path: \"/admin\" });\n    }\n  },\n  computed: {\n    htmlText() {\n      return Marked(this.mdContent);\n    }\n  },\n  mounted() {\n    Marked.setOptions({\n      renderer: new Marked.Renderer(),\n      smartLists: true,\n      highlight: function(code) {\n        return highlight.highlightAuto(code).value;\n      }\n    });\n\n    let mdContent = this.$refs.mdContent.$el;\n    let _this = this;\n    mdContent.addEventListener(\n      \"scroll\",\n      function() {\n        let realArea = this.children[0];\n        let scrollTop = realArea.scrollTop;\n        let scrollHeight = realArea.scrollHeight - realArea.offsetHeight;\n        let htmlContent = _this.$refs.htmlContent;\n        htmlContent.scrollTop =\n          (htmlContent.scrollHeight - htmlContent.offsetHeight) *\n          (scrollTop / scrollHeight);\n      },\n      true\n    );\n  },\n  created() {\n    if (!this.isNew) {\n      // console.log(this.articleId)\n      GetArticle({ _id: this.articleId }).then(res => {\n        console.log(res)\n        let articleData = res.data.data.article;\n        this.title = articleData.Title;\n        this.tags = articleData.Name;\n        this.mdContent = articleData.Content;\n        this.abstract = articleData.Summary;\n        this.checkIsSameAsLocalStorage();\n      });\n    } else {\n      this.checkIsSameAsLocalStorage();\n    }\n  },\n  beforeDestroy() {\n    clearTimeout(this.timer);\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@//assets/css/md2html\";\n@import \"~highlight.js/styles/atom-one-light.css\";\n\n.editor {\n  padding: 10px 0 20px;\n\n  .editor-row {\n    width: 100%;\n    padding: 6px 10px;\n    text-align: left;\n\n    .title-input {\n      width: 500px;\n    }\n  }\n\n  .content-md {\n    position: relative;\n\n    .img-upload {\n      position: absolute;\n      bottom: 4px;\n      right: 20px;\n      text-align: right;\n    }\n\n    .icon {\n      font-size: 28px;\n      cursor: pointer;\n    }\n\n    .img-form {\n      position: relative;\n      margin: 0 0 1% 20%;\n      width: 80%;\n      height: 100px;\n      border: 1px dashed rgba(0, 0, 0, 0.08);\n      background: rgba(255, 255, 255, 0.8);\n\n      &:hover {\n        border-color: rgba(0, 0, 0, 0.5);\n      }\n    }\n\n    .img-input {\n      opacity: 0;\n      width: 60%;\n    }\n\n    .img-content {\n      position: absolute;\n      top: 0;\n      left: 0;\n      box-sizing: border-box;\n      padding: 20px 0 0 0;\n      text-align: center;\n      width: 100%;\n      height: 100%;\n      cursor: pointer;\n    }\n\n    .text {\n      margin-bottom: 10px;\n    }\n  }\n\n  .content-textarea {\n    & > textarea {\n      height: 700px;\n      resize: none;\n    }\n  }\n\n  .digest-textarea {\n    & > textarea {\n      resize: none;\n    }\n  }\n\n  .content-show {\n    border: 1px solid #dcdee2;\n    height: 700px;\n    resize: none;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/articleEditor"}]}
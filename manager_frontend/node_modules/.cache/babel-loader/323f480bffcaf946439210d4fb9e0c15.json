{"remainingRequest":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/babel-loader/lib/index.js!/Users/joey/joey/go_project/blog/manager_frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/joey/joey/go_project/blog/manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/joey/joey/go_project/blog/manager_frontend/src/views/admin/management.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/joey/joey/go_project/blog/manager_frontend/src/views/admin/management.vue","mtime":1592379437489},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gIkAvdXRpbHMvZm9ybWF0RGF0ZSI7CmltcG9ydCB7IEdldEFydGljbGVMaXN0LCBSZW1vdmVBcnRpY2xlIH0gZnJvbSAiQC9hcGkvbWFuYWdlbWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdG90YWw6IDAsCiAgICAgIHBhZ2U6IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgYXJ0aWNsZXM6IFtdLAogICAgICBjb25maXJtUmVtb3ZlOiBmYWxzZSwKICAgICAgcmVtb3ZlSWQ6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZvcm1hdEFydGljbGVzOiBmdW5jdGlvbiBmb3JtYXRBcnRpY2xlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXJ0aWNsZXMubWFwKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB2YXIgbGlzdCA9IHt9OwogICAgICAgIGxpc3QuX2lkID0gdmFsLkFydGljbGVJZDsKICAgICAgICBsaXN0LnRpdGxlID0gdmFsLlRpdGxlOwogICAgICAgIGxpc3QudGFnID0gdmFsLk5hbWU7CiAgICAgICAgbGlzdC5jcmVhdGVEYXRlID0gZm9ybWF0RGF0ZShuZXcgRGF0ZSh2YWwuQ3JlYXRlVGltZSksICJ5eXl5LU1NLWRkIGhoOm1tIik7CiAgICAgICAgbGlzdC51cGRhdGVEYXRlID0gZm9ybWF0RGF0ZShuZXcgRGF0ZSh2YWwuVXBkYXRlZEF0KSwgInl5eXktTU0tZGQgaGg6bW0iKTsgLy8gbGlzdC5sYXN0RGF0ZSA9IGZvcm1hdERhdGUoCiAgICAgICAgLy8gICBuZXcgRGF0ZSh2YWwubGFzdERhdGUgfHwgbGlzdC5kYXRlKSwKICAgICAgICAvLyAgICJ5eXl5LU1NLWRkIGhoOm1tIgogICAgICAgIC8vICk7CgogICAgICAgIGxpc3Qudmlld0NvdW50ID0gdmFsLlZpZXdDb3VudDsKICAgICAgICBsaXN0LmNvbW1lbnRDb3VudCA9IHZhbC5Db21tZW50Q291bnQ7IC8vIGxpc3QudHlwZSA9IHZhbC50eXBlID09PSAxID8gIuengeWvhiIgOiAi5YWs5byAIjsKCiAgICAgICAgcmV0dXJuIGxpc3Q7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZEFydGljbGVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkQXJ0aWNsZXM6IGZ1bmN0aW9uIGxvYWRBcnRpY2xlcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYXJhbSA9IHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUKICAgICAgfTsKICAgICAgR2V0QXJ0aWNsZUxpc3QocGFyYW0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcykKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwoKICAgICAgICBfdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhpcy50b3RhbCA9IGRhdGEuZGF0YS50b3RhbDsKICAgICAgICAgIHRoaXMuYXJ0aWNsZXMgPSBkYXRhLmRhdGEuYXJ0aWNsZUxpc3Q7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZU1vZGlmeTogZnVuY3Rpb24gaGFuZGxlTW9kaWZ5KGluZGV4KSB7CiAgICAgIHZhciBpZCA9IHRoaXMuYXJ0aWNsZXNbaW5kZXhdLkFydGljbGVJZDsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICJtb2RpZnlBcnRpY2xlIiwKICAgICAgICBxdWVyeTogewogICAgICAgICAgX2lkOiBpZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8gaGFuZGxlVHlwZUNoYW5nZShpKSB7CiAgICAvLyAgIGxldCBpZCA9IHRoaXMuYXJ0aWNsZXNbaV0uX2lkOwogICAgLy8gICBsZXQgbmV3RGF0YSA9IHRoaXMuYXJ0aWNsZXNbaV0udHlwZSA9PT0gMSA/IHsgdHlwZTogMCB9IDogeyB0eXBlOiAxIH07CiAgICAvLyAgIENoYW5nZVN0YXRlKHsgX2lkOiBpZCwgbmV3RGF0YTogbmV3RGF0YSB9KQogICAgLy8gICAgIC50aGVuKCgpID0+IHsKICAgIC8vICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5YiH5o2i5oiQ5YqfISIpOwogICAgLy8gICAgICAgdGhpcy5hcnRpY2xlc1tpXS50eXBlID0gMSBeIHRoaXMuYXJ0aWNsZXNbaV0udHlwZTsKICAgIC8vICAgICB9KQogICAgLy8gICAgIC5jYXRjaCgoKSA9PiB7fSk7CiAgICAvLyB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoaW5kZXgpIHsKICAgICAgdGhpcy5jb25maXJtUmVtb3ZlID0gdHJ1ZTsKICAgICAgdGhpcy5yZW1vdmVJZCA9IHRoaXMuYXJ0aWNsZXNbaW5kZXhdLkFydGljbGVJZDsgLy8gY29uc29sZS5sb2codGhpcy5yZW1vdmVJZCkKICAgIH0sCiAgICBkaWFsb2dDbGlja09rOiBmdW5jdGlvbiBkaWFsb2dDbGlja09rKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuY29uZmlybVJlbW92ZSA9IGZhbHNlOwogICAgICBSZW1vdmVBcnRpY2xlKHsKICAgICAgICBhcnRpY2xlSWQ6IHRoaXMucmVtb3ZlSWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyEiKTsKCiAgICAgICAgX3RoaXMyLmxvYWRBcnRpY2xlcygpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlID0gdmFsOwogICAgICB0aGlzLmxvYWRBcnRpY2xlcygpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA,SAAA,UAAA,QAAA,oBAAA;AACA,SAAA,cAAA,EAAA,aAAA,QAAA,kBAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,CADA;AAEA,MAAA,IAAA,EAAA,CAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,aAAA,EAAA,KALA;AAMA,MAAA,QAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,aAAA,KAAA,QAAA,CAAA,GAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,IAAA,GAAA,EAAA;AACA,QAAA,IAAA,CAAA,GAAA,GAAA,GAAA,CAAA,SAAA;AACA,QAAA,IAAA,CAAA,KAAA,GAAA,GAAA,CAAA,KAAA;AACA,QAAA,IAAA,CAAA,GAAA,GAAA,GAAA,CAAA,IAAA;AACA,QAAA,IAAA,CAAA,UAAA,GAAA,UAAA,CAAA,IAAA,IAAA,CAAA,GAAA,CAAA,UAAA,CAAA,EAAA,kBAAA,CAAA;AACA,QAAA,IAAA,CAAA,UAAA,GAAA,UAAA,CAAA,IAAA,IAAA,CAAA,GAAA,CAAA,SAAA,CAAA,EAAA,kBAAA,CAAA,CANA,CAOA;AACA;AACA;AACA;;AACA,QAAA,IAAA,CAAA,SAAA,GAAA,GAAA,CAAA,SAAA;AACA,QAAA,IAAA,CAAA,YAAA,GAAA,GAAA,CAAA,YAAA,CAZA,CAaA;;AACA,eAAA,IAAA;AACA,OAfA,CAAA;AAgBA;AAlBA,GAXA;AA+BA,EAAA,OA/BA,qBA+BA;AACA,SAAA,YAAA;AACA,GAjCA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,KAAA,GAAA;AACA,QAAA,IAAA,EAAA,KAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAAA;AAFA,OAAA;AAIA,MAAA,cAAA,CAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,YAAA,IAAA,GAAA,GAAA,CAAA,IAAA;;AACA,QAAA,KAAA,CAAA,SAAA,CAAA,YAAA;AACA,eAAA,KAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,eAAA,QAAA,GAAA,IAAA,CAAA,IAAA,CAAA,WAAA;AACA,SAHA;AAIA,OAPA;AAQA,KAdA;AAeA,IAAA,YAfA,wBAeA,KAfA,EAeA;AACA,UAAA,EAAA,GAAA,KAAA,QAAA,CAAA,KAAA,EAAA,SAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,eAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,GAAA,EAAA;AAAA;AAAA,OAAA;AACA,KAlBA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,YA7BA,wBA6BA,KA7BA,EA6BA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,EAAA,SAAA,CAFA,CAGA;AAEA,KAlCA;AAmCA,IAAA,aAnCA,2BAmCA;AAAA;;AACA,WAAA,aAAA,GAAA,KAAA;AAEA,MAAA,aAAA,CAAA;AAAA,QAAA,SAAA,EAAA,KAAA;AAAA,OAAA,CAAA,CACA,IADA,CACA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA;;AACA,QAAA,MAAA,CAAA,YAAA;AACA,OAJA,EAKA,KALA,CAKA,YAAA,CAAA,CALA;AAMA,KA5CA;AA6CA,IAAA,mBA7CA,+BA6CA,GA7CA,EA6CA;AACA,WAAA,IAAA,GAAA,GAAA;AACA,WAAA,YAAA;AACA;AAhDA;AAlCA,CAAA","sourcesContent":["<template>\n  <div class=\"management\">\n    <el-table :data=\"formatArticles\" border>\n      <el-table-column\n        align=\"center\"\n        fixed\n        prop=\"title\"\n        label=\"标题\"\n        min-width=\"200\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"tag\"\n        label=\"标签\"\n        min-width=\"100\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"createDate\"\n        label=\"创建时间\"\n        min-width=\"120\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"updateDate\"\n        label=\"最后编辑时间\"\n        min-width=\"120\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"viewCount\"\n        label=\"阅读量\"\n        min-width=\"80\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"commentCount\"\n        label=\"评论数\"\n        min-width=\"80\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        fixed=\"right\"\n        label=\"编辑\"\n        min-width=\"200\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            size=\"small\"\n            @click=\"handleModify(scope.$index)\"\n            >编辑</el-button\n          >\n          <!-- <el-button\n            type=\"primary\"\n            size=\"small\"\n            @click=\"handleTypeChange(scope.$index)\"\n            >切换</el-button\n          > -->\n          <el-button\n            type=\"error\"\n            size=\"small\"\n            @click=\"handleRemove(scope.$index)\"\n            >删除</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"page\">\n      <el-pagination\n        background\n        prev-text=\"上一页\"\n        next-text=\"下一页\"\n        layout=\"prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"pageSize\"\n        @current-change=\"handleCurrentChange\"\n      ></el-pagination>\n    </div>\n    <el-dialog title=\"提示\" :visible.sync=\"confirmRemove\" width=\"30%\">\n      <span>确定删除吗？</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"confirmRemove = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"dialogClickOk\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { formatDate } from \"@/utils/formatDate\";\nimport { GetArticleList,RemoveArticle } from \"@/api/management\";\n\nexport default {\n  data() {\n    return {\n      total: 0,\n      page: 1,\n      pageSize: 10,\n      articles: [],\n      confirmRemove: false,\n      removeId: \"\"\n    };\n  },\n  computed: {\n    formatArticles() {\n      return this.articles.map(val => {\n        let list = {};\n        list._id = val.ArticleId;\n        list.title = val.Title;\n        list.tag = val.Name\n        list.createDate = formatDate(new Date(val.CreateTime), \"yyyy-MM-dd hh:mm\");\n        list.updateDate = formatDate(new Date(val.UpdatedAt), \"yyyy-MM-dd hh:mm\");\n        // list.lastDate = formatDate(\n        //   new Date(val.lastDate || list.date),\n        //   \"yyyy-MM-dd hh:mm\"\n        // );\n        list.viewCount = val.ViewCount;\n        list.commentCount = val.CommentCount\n        // list.type = val.type === 1 ? \"私密\" : \"公开\";\n        return list;\n      });\n    }\n  },\n  created() {\n    this.loadArticles();\n  },\n  methods: {\n    loadArticles() {\n      let param = {\n        page: this.page,\n        pageSize: this.pageSize\n      };\n      GetArticleList(param).then(res => {\n        // console.log(res)\n        let data = res.data;\n        this.$nextTick(function() {\n          this.total = data.data.total;\n          this.articles = data.data.articleList;\n        });\n      });\n    },\n    handleModify(index) {\n      let id = this.articles[index].ArticleId;\n      this.$router.push({ path: \"modifyArticle\", query: { _id: id } });\n    },\n    // handleTypeChange(i) {\n    //   let id = this.articles[i]._id;\n    //   let newData = this.articles[i].type === 1 ? { type: 0 } : { type: 1 };\n    //   ChangeState({ _id: id, newData: newData })\n    //     .then(() => {\n    //       this.$message.success(\"切换成功!\");\n    //       this.articles[i].type = 1 ^ this.articles[i].type;\n    //     })\n    //     .catch(() => {});\n    // },\n    handleRemove(index) {\n      this.confirmRemove = true;\n      this.removeId = this.articles[index].ArticleId;\n      // console.log(this.removeId)\n      \n    },\n    dialogClickOk() {\n      this.confirmRemove = false;\n      \n      RemoveArticle({ articleId: this.removeId })\n        .then(() => {\n          this.$message.success(\"删除成功!\");\n          this.loadArticles();\n        })\n        .catch(() => {});\n    },\n    handleCurrentChange(val) {\n      this.page = val;\n      this.loadArticles();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.management {\n  padding: 60px 20px;\n  margin: 0 auto;\n  max-width: 1264px;\n  .page {\n    margin-top: 20px;\n  }\n  .btn {\n    margin: 6px 0;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/admin"}]}
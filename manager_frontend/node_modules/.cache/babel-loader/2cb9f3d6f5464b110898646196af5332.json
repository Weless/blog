{"remainingRequest":"/Users/joey/joey/go_project/blog/frontend/node_modules/babel-loader/lib/index.js!/Users/joey/joey/go_project/blog/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/joey/joey/go_project/blog/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/joey/joey/go_project/blog/frontend/src/views/admin/imageManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/joey/joey/go_project/blog/frontend/src/views/admin/imageManagement.vue","mtime":1592208739106},{"path":"/Users/joey/joey/go_project/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG9uZUltYWdlIGZyb20gIkAvY29tcG9uZW50cy9vbmVJbWFnZS9vbmVJbWFnZSI7CmltcG9ydCB7IEdldEltZ0xpc3QsIFJlbW92ZUltZyB9IGZyb20gIkAvYXBpL2ltZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW1hZ2VNYW5hZ2VtZW50IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFnZTogMSwKICAgICAgcGFnZVNpemU6IDI0LAogICAgICB0b3RhbDogMCwKICAgICAgaW1nTGlzdDogW10sCiAgICAgIGN1cnJlbnRJbWdGaWxlTmFtZTogIiIsCiAgICAgIGN1cnJlbnRJbWdTcmM6ICIiLAogICAgICBjdXJyZW50SW1nSWQ6ICIiLAogICAgICBkZWxldGVNb2RhbDogZmFsc2UsCiAgICAgIGlzRW5sYXJnZW1lbnRTaG93OiBmYWxzZQogICAgfTsKICB9LAoKICAvKiBlc2xpbnQtZGlzYWJsZSAqLwogIG1ldGhvZHM6IHsKICAgIGxvYWRJbWdzOiBmdW5jdGlvbiBsb2FkSW1ncygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYXJhbSA9IHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUKICAgICAgfTsKICAgICAgR2V0SW1nTGlzdChwYXJhbSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS5yZXNEYXRhLnRvdGFsOwogICAgICAgICAgdGhpcy5pbWdMaXN0ID0gcmVzLmRhdGEucmVzRGF0YS5saXN0OwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDngrnlh7vliKDpmaQKICAgIGRlbGV0ZUNsaWNrOiBmdW5jdGlvbiBkZWxldGVDbGljayhpbmRleCkgewogICAgICB2YXIgY3VycmVudEltZ0RhdGEgPSB0aGlzLmltZ0xpc3RbaW5kZXhdOwogICAgICB0aGlzLmN1cnJlbnRJbWdGaWxlTmFtZSA9IGN1cnJlbnRJbWdEYXRhLmZpbGVuYW1lOwogICAgICB0aGlzLmN1cnJlbnRJbWdJZCA9IGN1cnJlbnRJbWdEYXRhLl9pZDsKICAgICAgdGhpcy5kZWxldGVNb2RhbCA9IHRydWU7CiAgICB9LAogICAgLy8g5Yig6Zmk56Gu6K6k5qih5oCB5qGGCiAgICBtb2RhbENsaWNrT2s6IGZ1bmN0aW9uIG1vZGFsQ2xpY2tPaygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmRlbGV0ZU1vZGFsID0gIXRoaXMuZGVsZXRlTW9kYWw7CiAgICAgIFJlbW92ZUltZyh7CiAgICAgICAgX2lkOiB0aGlzLmN1cnJlbnRJbWdJZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygi5pys5Zyw5Yig6Zmk5oiQ5YqfISIpOwoKICAgICAgICBfdGhpczIubG9hZEltZ3MoKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVzaXplQ2xpY2s6IGZ1bmN0aW9uIHJlc2l6ZUNsaWNrKGluZGV4KSB7CiAgICAgIHRoaXMuY3VycmVudEltZ1NyYyA9IHRoaXMuaW1nTGlzdFtpbmRleF0udXJsOwogICAgICB0aGlzLmlzRW5sYXJnZW1lbnRTaG93ID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVQYWdlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVQYWdlQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2UgPSB2YWw7CiAgICAgIHRoaXMubG9hZEltZ3MoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRJbWdzKCk7CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBvbmVJbWFnZTogb25lSW1hZ2UKICB9Cn07"},{"version":3,"sources":["imageManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,OAAA,QAAA,MAAA,gCAAA;AACA,SAAA,UAAA,EAAA,SAAA,QAAA,WAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,CADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,CAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,kBAAA,EAAA,EALA;AAMA,MAAA,aAAA,EAAA,EANA;AAOA,MAAA,YAAA,EAAA,EAPA;AAQA,MAAA,WAAA,EAAA,KARA;AASA,MAAA,iBAAA,EAAA;AATA,KAAA;AAWA,GAdA;;AAeA;AACA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,UAAA,KAAA,GAAA;AACA,QAAA,IAAA,EAAA,KAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAAA;AAFA,OAAA;AAIA,MAAA,UAAA,CAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,CAAA,YAAA;AACA,eAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA,KAAA;AACA,eAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA,IAAA;AACA,SAHA;AAIA,OALA;AAMA,KAZA;AAaA;AACA,IAAA,WAdA,uBAcA,KAdA,EAcA;AACA,UAAA,cAAA,GAAA,KAAA,OAAA,CAAA,KAAA,CAAA;AACA,WAAA,kBAAA,GAAA,cAAA,CAAA,QAAA;AACA,WAAA,YAAA,GAAA,cAAA,CAAA,GAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,KAnBA;AAoBA;AACA,IAAA,YArBA,0BAqBA;AAAA;;AACA,WAAA,WAAA,GAAA,CAAA,KAAA,WAAA;AACA,MAAA,SAAA,CAAA;AAAA,QAAA,GAAA,EAAA,KAAA;AAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,SAAA;;AACA,QAAA,MAAA,CAAA,QAAA;AACA,OAHA;AAIA,KA3BA;AA4BA,IAAA,WA5BA,uBA4BA,KA5BA,EA4BA;AACA,WAAA,aAAA,GAAA,KAAA,OAAA,CAAA,KAAA,EAAA,GAAA;AACA,WAAA,iBAAA,GAAA,IAAA;AACA,KA/BA;AAgCA,IAAA,gBAhCA,4BAgCA,GAhCA,EAgCA;AACA,WAAA,IAAA,GAAA,GAAA;AACA,WAAA,QAAA;AACA;AAnCA,GAhBA;AAqDA,EAAA,OArDA,qBAqDA;AACA,SAAA,QAAA;AACA,GAvDA;AAwDA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA;AADA;AAxDA,CAAA","sourcesContent":["<template>\n  <div class=\"image-management\">\n    <el-row :gutter=\"16\">\n      <el-col\n        v-for=\"(item, index) in imgList\"\n        :key=\"index\"\n        :xs=\"12\"\n        :sm=\"6\"\n        :md=\"4\"\n        class=\"img-col\"\n      >\n        <oneImage\n          :src=\"item.url\"\n          :index=\"index\"\n          @deleteClick=\"deleteClick\"\n          @resizeClick=\"resizeClick\"\n        ></oneImage>\n      </el-col>\n    </el-row>\n\n    <div class=\"page\" v-if=\"total > 10\">\n      <el-pagination\n        prev-text=\"上一页\"\n        next-text=\"下一页\"\n        :total=\"total\"\n        :page-size=\"pageSize\"\n        @on-change=\"handlePageChange\"\n      ></el-pagination>\n    </div>\n\n    <el-dialog :visible.sync=\"deleteModal\" title=\"修改成功\">\n      <p>\n        确定要删除图片 <b>{{ currentImgFileName }}</b> 么？\n      </p>\n      <p>由于使用第三方图床，该操作会有一定延迟。</p>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"deleteModal = !deleteModal\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"modalClickOk\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <transition name=\"fade\">\n      <div\n        class=\"image-enlargement\"\n        v-show=\"isEnlargementShow\"\n        @click=\"isEnlargementShow = !isEnlargementShow\"\n      >\n        <img class=\"img-current\" :src=\"currentImgSrc\" alt=\"\" />\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport oneImage from \"@/components/oneImage/oneImage\";\nimport { GetImgList, RemoveImg } from \"@/api/img\";\n\nexport default {\n  name: \"imageManagement\",\n  data() {\n    return {\n      page: 1,\n      pageSize: 24,\n      total: 0,\n      imgList: [],\n      currentImgFileName: \"\",\n      currentImgSrc: \"\",\n      currentImgId: \"\",\n      deleteModal: false,\n      isEnlargementShow: false\n    };\n  },\n  /* eslint-disable */\n  methods: {\n    loadImgs() {\n      let param = {\n        page: this.page,\n        pageSize: this.pageSize\n      };\n      GetImgList(param).then(res => {\n        this.$nextTick(function() {\n          this.total = res.data.resData.total;\n          this.imgList = res.data.resData.list;\n        });\n      });\n    },\n    // 点击删除\n    deleteClick(index) {\n      let currentImgData = this.imgList[index];\n      this.currentImgFileName = currentImgData.filename;\n      this.currentImgId = currentImgData._id;\n      this.deleteModal = true;\n    },\n    // 删除确认模态框\n    modalClickOk() {\n      this.deleteModal = !this.deleteModal;\n      RemoveImg({ _id: this.currentImgId }).then(res => {\n        this.$message.success(\"本地删除成功!\");\n        this.loadImgs();\n      });\n    },\n    resizeClick(index) {\n      this.currentImgSrc = this.imgList[index].url;\n      this.isEnlargementShow = true;\n    },\n    handlePageChange(val) {\n      this.page = val;\n      this.loadImgs();\n    }\n  },\n  created() {\n    this.loadImgs();\n  },\n  components: {\n    oneImage\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.image-management {\n  padding: 20px 10px;\n  margin: 0 auto;\n  max-width: 1264px;\n  .img-col {\n    margin-bottom: 10px;\n  }\n  .image-enlargement {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.8);\n    .img-current {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate3d(-50%, -50%, 0);\n      max-width: 100%;\n      max-height: 100%;\n    }\n  }\n  .fade-enter-active,\n  .fade-leave-active {\n    transition: opacity 0.2s;\n  }\n  .fade-enter,\n  .fade-leave-to {\n    opacity: 0;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/admin"}]}
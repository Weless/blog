{"remainingRequest":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/joey/joey/go_project/blog/manager_frontend/src/components/articleEditor/articleEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/joey/joey/go_project/blog/manager_frontend/src/components/articleEditor/articleEditor.vue","mtime":1592548424974},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNYXJrZWQgZnJvbSAibWFya2VkIjsKaW1wb3J0IGhpZ2hsaWdodCBmcm9tICJoaWdobGlnaHQuanMiOwovLyBpbXBvcnQgKiBhcyBxaW5pdSBmcm9tICJxaW5pdS1qcyI7Ci8vIGltcG9ydCB7IEdldFFpbml1VG9rZW4sIERvbWFpbiwgY29uZmlnIH0gZnJvbSAiQC9hcGkvcWluaXUiOwovLyBpbXBvcnQgeyBTYXZlSW1nIH0gZnJvbSAiQC9hcGkvaW1nIjsKaW1wb3J0IHsKICBTYXZlQXJ0aWNsZSwKICBDaGFuZ2VBcnRpY2xlLAogIEdldEFydGljbGUsCiAgR2V0Q2F0ZWdvcnlMaXN0LAp9IGZyb20gIkAvYXBpL2FydGljbGVFZGl0b3IiOwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpc05ldzogewogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAogICAgYXJ0aWNsZUlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogIiIsCiAgICAgIGNhdGVnb3J5OiAiIiwKICAgICAgbWRDb250ZW50OiAiIiwKICAgICAgc3VtbWFyeTogIiIsCiAgICAgIGlzVXBsb2FkU2hvdzogZmFsc2UsCiAgICAgIHNob3dNb2RhbDogZmFsc2UsCiAgICAgIHNob3dMb2NhbFN0b3JhZ2VNb2RhbDogZmFsc2UsCiAgICAgIGZvcm06IHt9LAogICAgICB0aW1lcjogbnVsbCwKICAgICAgY2F0YWxvZzogW10sCiAgICAgIGNvbnRlbnQ6ICIiLAogICAgICBjYXRlZ29yeUxpc3Q6IFtdLAogICAgICBjYXRlZ29yeUlkOjAsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2V0TG9jYWxTdG9yYWdlKCkgewogICAgICBsZXQgYXJ0aWNsZURhdGEgPSB7CiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnksCiAgICAgICAgc3VtbWFyeTogdGhpcy5zdW1tYXJ5LAogICAgICAgIG1kQ29udGVudDogdGhpcy5tZENvbnRlbnQsCiAgICAgICAgY2F0ZWdvcnlJZDogdGhpcy5jYXRlZ29yeUlkCiAgICAgIH07CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiX2FydGljbGUiLCBKU09OLnN0cmluZ2lmeShhcnRpY2xlRGF0YSkpOwogICAgfSwKICAgIHZhbGlkYXRlRm9ybShkYXRhKSB7CiAgICAgIGNvbnN0IGxpc3QgPSBbCiAgICAgICAgeyB0eXBlOiAidGl0bGUiLCBtc2c6ICLov5jmsqHlhpnmoIfpopjlkaLvvIEiIH0sCiAgICAgICAgeyB0eXBlOiAiY2F0ZWdvcnkiLCBtc2c6ICLkuI3liqDmoIfnrb7mgI7kuYjlvZLmoaPvvJ8iIH0sCiAgICAgICAgeyB0eXBlOiAiY29udGVudCIsIG1zZzogIuato+aWh+mDveayoeacieWPkeS4quWVpe+8ge+8gSIgfSwKICAgICAgICB7IHR5cGU6ICJzdW1tYXJ5IiwgbXNnOiAi5Yqg5LiK5pGY6KaB6aaW6aG15omN5aW955yL5ZWK77yBIiB9CiAgICAgIF07CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCB0eXBlID0gbGlzdFtpXS50eXBlOwogICAgICAgIGlmICghZGF0YVt0eXBlXS5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IobGlzdFtpXS5tc2cpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBjbGVhckZvcm0oKSB7CiAgICAgIHRoaXMudGl0bGUgPSAiIjsKICAgICAgdGhpcy5tZENvbnRlbnQgPSAiIjsKICAgICAgdGhpcy5jYXRlZ29yeSA9ICIiOwogICAgICB0aGlzLnN1bW1hcnkgPSAiIjsKICAgICAgdGhpcy5jYXRlZ29yeUlkID0gMAogICAgfSwKICAgIGhhbmRsZVNlbmRBcnRpY2xlKCkgewogICAgICB0aGlzLnNldExvY2FsU3RvcmFnZSgpOwogICAgICBsZXQgYXJ0aWNsZURhdGEgPSB7CiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnksCiAgICAgICAgc3VtbWFyeTogdGhpcy5zdW1tYXJ5LAogICAgICAgIGNvbnRlbnQ6IHRoaXMubWRDb250ZW50LAogICAgICB9OwogICAgICBpZiAoIXRoaXMudmFsaWRhdGVGb3JtKGFydGljbGVEYXRhKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgdHJhbnNEYXRhID0gewogICAgICAgIHRpdGxlOnRoaXMudGl0bGUsCiAgICAgICAgY2F0ZWdvcnlJZDp0aGlzLmNhdGVnb3J5SWQsCiAgICAgICAgc3VtbWFyeTp0aGlzLnN1bW1hcnksCiAgICAgICAgY29udGVudDp0aGlzLm1kQ29udGVudAogICAgICB9CiAgICAgIAogICAgICBTYXZlQXJ0aWNsZSh0cmFuc0RhdGEpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tc2cpOwogICAgICAgICAgdGhpcy5jbGVhckZvcm0oKTsKICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiX2FydGljbGUiKTsgLy8g56e76Zmk5a2Y5qGjCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlQXJ0aWNsZSgpIHsKICAgICAgdGhpcy5zZXRMb2NhbFN0b3JhZ2UoKTsKICAgICAgLy8gbGV0IG5ld0RhdGEgPSB7CiAgICAgIC8vICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgIC8vICAgY2F0ZWdvcnlJZDogdGhpcy5jYXRlZ29yeUlkLAogICAgICAvLyAgIC8vIGxhc3REYXRlOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgLy8gICBzdW1tYXJ5OiB0aGlzLnN1bW1hcnksCiAgICAgIC8vICAgY29udGVudDogdGhpcy5tZENvbnRlbnQsCiAgICAgIC8vICAgLy8gbWRDb250ZW50OiB0aGlzLm1kQ29udGVudCwKICAgICAgLy8gICAvLyBjYXRhbG9nOiB0aGlzLmNhdGFsb2cKICAgICAgLy8gfTsKICAgICAgbGV0IGludF9hcnRpY2xlSWQgPSBwYXJzZUludCh0aGlzLmFydGljbGVJZCkKICAgICAgQ2hhbmdlQXJ0aWNsZSh7IAogICAgICAgIGFydGljbGVJZDogaW50X2FydGljbGVJZCwgCiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgY2F0ZWdvcnlJZDogdGhpcy5jYXRlZ29yeUlkLAogICAgICAgIHN1bW1hcnk6IHRoaXMuc3VtbWFyeSwKICAgICAgICBjb250ZW50OiB0aGlzLm1kQ29udGVudCwKICAgICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsKICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiX2FydGljbGUiKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7CiAgICB9LAogICAgYXV0b1NhdmUoKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLnRpdGxlLmxlbmd0aCB8fAogICAgICAgIHRoaXMuY2F0ZWdvcnkubGVuZ3RoIHx8CiAgICAgICAgdGhpcy5tZENvbnRlbnQubGVuZ3RoIHx8CiAgICAgICAgdGhpcy5zdW1tYXJ5Lmxlbmd0aAogICAgICApIHsKICAgICAgICB0aGlzLnNldExvY2FsU3RvcmFnZSgpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi6Ieq5Yqo5L+d5a2Y5oiQ5Yqf77yBIik7CiAgICAgIH0KICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQodGhpcy5hdXRvU2F2ZSwgMTAwMCAqIDYwKTsKICAgIH0sCiAgICBtb2RhbExvY2FsU3RvcmFnZUNsaWNrQ2FuY2VsKCkgewogICAgICB0aGlzLnNob3dMb2NhbFN0b3JhZ2VNb2RhbCA9IGZhbHNlOwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIl9hcnRpY2xlIik7CiAgICAgIHRoaXMuYXV0b1NhdmUoKTsKICAgIH0sCiAgICBtb2RhbExvY2FsU3RvcmFnZUNsaWNrT2soKSB7CiAgICAgIHRoaXMuc2hvd0xvY2FsU3RvcmFnZU1vZGFsID0gZmFsc2U7CiAgICAgIGxldCBhcnRpY2xlRGF0YSA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJfYXJ0aWNsZSIpKTsKICAgICAgdGhpcy50aXRsZSA9IGFydGljbGVEYXRhLnRpdGxlOwogICAgICB0aGlzLmNhdGVnb3J5ID0gYXJ0aWNsZURhdGEuY2F0ZWdvcnk7CiAgICAgIHRoaXMuc3VtbWFyeSA9IGFydGljbGVEYXRhLnN1bW1hcnk7CiAgICAgIHRoaXMubWRDb250ZW50ID0gYXJ0aWNsZURhdGEubWRDb250ZW50OwogICAgICB0aGlzLmNhdGVnb3J5SWQgPSBhcnRpY2xlRGF0YS5jYXRlZ29yeUlkCiAgICAgIHRoaXMuYXV0b1NhdmUoKTsKICAgIH0sCiAgICBjaGVja0lzU2FtZUFzTG9jYWxTdG9yYWdlKCkgewogICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJfYXJ0aWNsZSIpKSB7CiAgICAgICAgbGV0IGFydGljbGVEYXRhID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oIl9hcnRpY2xlIikpOwogICAgICAgIGlmICgKICAgICAgICAgIGFydGljbGVEYXRhLnRpdGxlICE9PSB0aGlzLnRpdGxlIHx8CiAgICAgICAgICAvLyBhcnRpY2xlRGF0YS5jYXRlZ29yeS5qb2luKCIiKSAhPT0gdGhpcy5jYXRlZ29yeS5qb2luKCIiKSB8fAogICAgICAgICAgYXJ0aWNsZURhdGEuY2F0ZWdvcnkgIT09IHRoaXMuY2F0ZWdvcnkgfHwKICAgICAgICAgIGFydGljbGVEYXRhLm1kQ29udGVudCAhPT0gdGhpcy5tZENvbnRlbnQgfHwKICAgICAgICAgIGFydGljbGVEYXRhLnN1bW1hcnkgIT09IHRoaXMuc3VtbWFyeQogICAgICAgICkgewogICAgICAgICAgdGhpcy5zaG93TG9jYWxTdG9yYWdlTW9kYWwgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF1dG9TYXZlKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXV0b1NhdmUoKTsKICAgICAgfQogICAgfSwKICAgIC8vIHVwbG9hZEltZ0NsaWNrKCkgewogICAgLy8gICB0aGlzLiRyZWZzLmltZ0lucHV0LmNsaWNrKCk7CiAgICAvLyB9LAogICAgLy8gdXBsb2FkSW1nKGV2ZW50KSB7CiAgICAvLyAgIGxldCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlczsKICAgIC8vICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgewogICAgLy8gICAgIHJldHVybjsKICAgIC8vICAgfQogICAgLy8gICBsZXQgZmlsZSA9IGZpbGVzWzBdOwoKICAgIC8vICAgLy/mlofku7blkI0o5Yqg5LiA5Liq5YmN57yA55u45b2T5LqO55uu5b2VKQogICAgLy8gICBsZXQgZmlsZW5hbWUgPSAibWRJbWcvIiArIGJ0b2EoRGF0ZS5ub3coKSkgKyBmaWxlLm5hbWU7CiAgICAvLyAgIGxldCBwdXRFeHRyYSA9IHsKICAgIC8vICAgICBmbmFtZTogZmlsZW5hbWUsCiAgICAvLyAgICAgcGFyYW1zOiB7fSwKICAgIC8vICAgICBtaW1lVHlwZTogbnVsbAogICAgLy8gICB9OwogICAgLy8gICBsZXQgY29tcGxldGVVcmwgPSAiIjsKICAgIC8vICAgbGV0IHNlbGYgPSB0aGlzOwoKICAgIC8vICAgbGV0IG9ic2VydmVyID0gewogICAgLy8gICAgIG5leHQocmVzKSB7CiAgICAvLyAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgLy8gICAgIH0sCiAgICAvLyAgICAgZXJyb3IoZXJyKSB7CiAgICAvLyAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgLy8gICAgIH0sCiAgICAvLyAgICAgY29tcGxldGUocmVzKSB7CiAgICAvLyAgICAgICBsZXQgeyBrZXkgfSA9IHJlczsKICAgIC8vICAgICAgIGNvbXBsZXRlVXJsID0gYCR7RG9tYWlufS8ke2tleX1gOwogICAgLy8gICAgICAgc2VsZi5tZENvbnRlbnQgKz0gYCFbJHtmaWxlbmFtZX1dKCR7Y29tcGxldGVVcmx9KWA7CiAgICAvLyAgICAgICBsZXQgaW1nRGF0YSA9IHsKICAgIC8vICAgICAgICAgZmlsZW5hbWUsCiAgICAvLyAgICAgICAgIHVybDogY29tcGxldGVVcmwKICAgIC8vICAgICAgIH07CiAgICAvLyAgICAgICBTYXZlSW1nKGltZ0RhdGEpLnRoZW4oKCkgPT4gewogICAgLy8gICAgICAgICBzZWxmLiRtZXNzYWdlLnN1Y2Nlc3MoIuWbvueJh+S4iuS8oOaIkOWKn++8gSIpOwogICAgLy8gICAgICAgfSk7CiAgICAvLyAgICAgfQogICAgLy8gICB9OwogICAgLy8gICBHZXRRaW5pdVRva2VuKCkudGhlbihyZXMgPT4gewogICAgLy8gICAgIGxldCB0b2tlbiA9IHJlcy5kYXRhLnJlc0RhdGEucWluaXVUb2tlbjsKICAgIC8vICAgICBsZXQgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBmaWxlbmFtZSwgdG9rZW4sIHB1dEV4dHJhLCBjb25maWcpOwogICAgLy8gICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKTsKICAgIC8vICAgfSk7CiAgICAvLyB9LAogICAgbW9kYWxDbGlja09rKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvYWRtaW4iIH0pOwogICAgfSwKICAgIGdldENhdGVnb3J5TGlzdCgpIHsKICAgICAgR2V0Q2F0ZWdvcnlMaXN0KCkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKQogICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSBkYXRhLmNhdGVnb3J5TGlzdDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDkuIvmi4nmoYblr7nlupTljZXlh7vkuovku7YKICAgIGhhbmRsZUNvbW1hbmQoY29tbWFuZCkgewogICAgICAvLyB0aGlzLiRtZXNzYWdlKCdjbGljayBvbiBpdGVtICcgKyBjb21tYW5kKTsKICAgICAgdGhpcy5jYXRlZ29yeSA9IGNvbW1hbmQuTmFtZTsKICAgICAgbGV0IGNhdGVnb3J5SWQgPSBjb21tYW5kLkNfaWQKICAgICAgdGhpcy5jYXRlZ29yeUlkID0gY2F0ZWdvcnlJZAogICAgfSwKICAgIAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGh0bWxUZXh0KCkgewogICAgICByZXR1cm4gTWFya2VkKHRoaXMubWRDb250ZW50KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBNYXJrZWQuc2V0T3B0aW9ucyh7CiAgICAgIHJlbmRlcmVyOiBuZXcgTWFya2VkLlJlbmRlcmVyKCksCiAgICAgIHNtYXJ0TGlzdHM6IHRydWUsCiAgICAgIGhpZ2hsaWdodDogZnVuY3Rpb24oY29kZSkgewogICAgICAgIHJldHVybiBoaWdobGlnaHQuaGlnaGxpZ2h0QXV0byhjb2RlKS52YWx1ZTsKICAgICAgfQogICAgfSk7CgogICAgbGV0IG1kQ29udGVudCA9IHRoaXMuJHJlZnMubWRDb250ZW50LiRlbDsKICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICBtZENvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgInNjcm9sbCIsCiAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgIGxldCByZWFsQXJlYSA9IHRoaXMuY2hpbGRyZW5bMF07CiAgICAgICAgbGV0IHNjcm9sbFRvcCA9IHJlYWxBcmVhLnNjcm9sbFRvcDsKICAgICAgICBsZXQgc2Nyb2xsSGVpZ2h0ID0gcmVhbEFyZWEuc2Nyb2xsSGVpZ2h0IC0gcmVhbEFyZWEub2Zmc2V0SGVpZ2h0OwogICAgICAgIGxldCBodG1sQ29udGVudCA9IF90aGlzLiRyZWZzLmh0bWxDb250ZW50OwogICAgICAgIGh0bWxDb250ZW50LnNjcm9sbFRvcCA9CiAgICAgICAgICAoaHRtbENvbnRlbnQuc2Nyb2xsSGVpZ2h0IC0gaHRtbENvbnRlbnQub2Zmc2V0SGVpZ2h0KSAqCiAgICAgICAgICAoc2Nyb2xsVG9wIC8gc2Nyb2xsSGVpZ2h0KTsKICAgICAgfSwKICAgICAgdHJ1ZQogICAgKTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAoIXRoaXMuaXNOZXcpIHsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5hcnRpY2xlSWQpCiAgICAgIHRoaXMuZ2V0Q2F0ZWdvcnlMaXN0KCk7CiAgICAgIEdldEFydGljbGUoeyBhcnRpY2xlSWQ6IHRoaXMuYXJ0aWNsZUlkIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGxldCBhcnRpY2xlRGF0YSA9IHJlcy5kYXRhLmRhdGEuYXJ0aWNsZTsKICAgICAgICB0aGlzLnRpdGxlID0gYXJ0aWNsZURhdGEuVGl0bGU7CiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGFydGljbGVEYXRhLk5hbWU7CiAgICAgICAgdGhpcy5tZENvbnRlbnQgPSBhcnRpY2xlRGF0YS5Db250ZW50OwogICAgICAgIHRoaXMuc3VtbWFyeSA9IGFydGljbGVEYXRhLlN1bW1hcnk7CiAgICAgICAgdGhpcy5jYXRlZ29yeUlkID0gYXJ0aWNsZURhdGEuQ2F0ZWdvcnlJZDsKICAgICAgICB0aGlzLmNoZWNrSXNTYW1lQXNMb2NhbFN0b3JhZ2UoKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpOwogICAgICB0aGlzLmNoZWNrSXNTYW1lQXNMb2NhbFN0b3JhZ2UoKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7CiAgfQp9Owo="},{"version":3,"sources":["articleEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"articleEditor.vue","sourceRoot":"src/components/articleEditor","sourcesContent":["<template>\n  <div class=\"editor\">\n    <el-form :inline=\"true\" class=\"editor-row\">\n      <el-form-item label=\"文章标题：\">\n        <el-input placeholder=\"文章标题...\" class=\"title-input\" v-model=\"title\"></el-input>\n      </el-form-item>\n    </el-form>\n\n    <el-row class=\"editor-row\">\n      <el-col>\n        <span>文章分类：</span>\n        <el-tag type=\"info\">{{category}}</el-tag>\n      </el-col>\n      <el-col>\n        <el-dropdown @command=\"handleCommand\">\n          <span class=\"el-dropdown-link\">\n            更改分类\n            <i class=\"el-icon-arrow-down el-icon--right\"></i>\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item\n              v-for=\"(item,index) in categoryList\"\n              :key=\"index\"\n              :command=\"item\"\n            >{{item.Name}}</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </el-col>\n      \n    </el-row>\n\n    <el-row class=\"editor-row\" :gutter=\"30\">\n      <el-col :span=\"12\" class=\"content-md\">\n        <el-input\n          type=\"textarea\"\n          class=\"content-textarea\"\n          placeholder=\"正文\"\n          v-model=\"mdContent\"\n          ref=\"mdContent\"\n        ></el-input>\n        <div class=\"img-upload\">\n          <i class=\"el-icon-picture\" v-show=\"!isUploadShow\" @click=\"isUploadShow = true\"></i>\n          <i class=\"el-icon-close\" v-show=\"isUploadShow\" @click=\"isUploadShow = false\"></i>\n          <!-- <el-upload\n            class=\"upload-demo\"\n            drag\n            action=\"https://jsonplaceholder.typicode.com/posts/\"\n            multiple\n            v-show=\"isUploadShow\"\n          >\n            <i class=\"el-icon-upload\"></i>\n            <div class=\"el-upload__text\">\n              将文件拖到此处，或<em>点击上传</em>\n            </div>\n          </el-upload>-->\n\n\n          <!-- <div class=\"img-form\" v-show=\"isUploadShow\" @click=\"uploadImgClick\">\n            <input class=\"img-input\" type=\"file\" ref=\"imgInput\" @change=\"uploadImg\" />\n            <div class=\"img-content\">\n              <div class=\"text\">点击或者拖拽上传图片</div>\n              <i class=\"el-icon-upload\"></i>\n            </div>\n          </div> -->\n        </div>\n      </el-col>\n      <el-col :span=\"12\">\n        <div class=\"content-show\" v-html=\"htmlText\" ref=\"htmlContent\"></div>\n      </el-col>\n    </el-row>\n\n    <el-row class=\"editor-row\" :gutter=\"30\">\n      <el-col>\n        <span class=\"text title-text\">文章摘要：</span>\n        <el-input\n          class=\"digest-textarea\"\n          :rows=\"3\"\n          placeholder=\"文章摘要...\"\n          type=\"textarea\"\n          v-model=\"summary\"\n        />\n      </el-col>\n    </el-row>\n\n    <div class=\"editor-row\">\n      <el-button v-if=\"isNew\" type=\"success\" @click=\"handleSendArticle()\">发布</el-button>\n      <!-- <el-button v-if=\"isNew\" type=\"success\" @click=\"handleSendArticle(1)\"\n        >私密发布</el-button\n      >-->\n      <el-button v-if=\"!isNew\" type=\"success\" @click=\"handleChangeArticle()\">发布修改</el-button>\n    </div>\n\n    <el-dialog :visible.sync=\"showModal\" title=\"修改成功\">\n      <p>是否返回【内容管理页面】？</p>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showModal = !showModal\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"modalClickOk\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog title=\"本地存档\" :visible.sync=\"showLocalStorageModal\" width=\"30%\">\n      <p>检测到有未发布的本地存档，是否恢复存档继续上次的编辑？</p>\n      <p>ps:取消则会删除本地存档!</p>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"modalLocalStorageClickCancel\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"modalLocalStorageClickOk\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport Marked from \"marked\";\nimport highlight from \"highlight.js\";\n// import * as qiniu from \"qiniu-js\";\n// import { GetQiniuToken, Domain, config } from \"@/api/qiniu\";\n// import { SaveImg } from \"@/api/img\";\nimport {\n  SaveArticle,\n  ChangeArticle,\n  GetArticle,\n  GetCategoryList,\n} from \"@/api/articleEditor\";\n\nexport default {\n  props: {\n    isNew: {\n      type: Boolean\n    },\n    articleId: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data() {\n    return {\n      title: \"\",\n      category: \"\",\n      mdContent: \"\",\n      summary: \"\",\n      isUploadShow: false,\n      showModal: false,\n      showLocalStorageModal: false,\n      form: {},\n      timer: null,\n      catalog: [],\n      content: \"\",\n      categoryList: [],\n      categoryId:0,\n    };\n  },\n  methods: {\n    setLocalStorage() {\n      let articleData = {\n        title: this.title,\n        category: this.category,\n        summary: this.summary,\n        mdContent: this.mdContent,\n        categoryId: this.categoryId\n      };\n      window.localStorage.setItem(\"_article\", JSON.stringify(articleData));\n    },\n    validateForm(data) {\n      const list = [\n        { type: \"title\", msg: \"还没写标题呢！\" },\n        { type: \"category\", msg: \"不加标签怎么归档？\" },\n        { type: \"content\", msg: \"正文都没有发个啥！！\" },\n        { type: \"summary\", msg: \"加上摘要首页才好看啊！\" }\n      ];\n      for (let i = 0; i < list.length; i++) {\n        let type = list[i].type;\n        if (!data[type].length) {\n          this.$message.error(list[i].msg);\n          return false;\n        }\n      }\n      return true;\n    },\n    clearForm() {\n      this.title = \"\";\n      this.mdContent = \"\";\n      this.category = \"\";\n      this.summary = \"\";\n      this.categoryId = 0\n    },\n    handleSendArticle() {\n      this.setLocalStorage();\n      let articleData = {\n        title: this.title,\n        category: this.category,\n        summary: this.summary,\n        content: this.mdContent,\n      };\n      if (!this.validateForm(articleData)) {\n        return;\n      }\n      let transData = {\n        title:this.title,\n        categoryId:this.categoryId,\n        summary:this.summary,\n        content:this.mdContent\n      }\n      \n      SaveArticle(transData)\n        .then(res => {\n          this.$message.success(res.data.msg);\n          this.clearForm();\n          window.localStorage.removeItem(\"_article\"); // 移除存档\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n    handleChangeArticle() {\n      this.setLocalStorage();\n      // let newData = {\n      //   title: this.title,\n      //   categoryId: this.categoryId,\n      //   // lastDate: new Date().getTime(),\n      //   summary: this.summary,\n      //   content: this.mdContent,\n      //   // mdContent: this.mdContent,\n      //   // catalog: this.catalog\n      // };\n      let int_articleId = parseInt(this.articleId)\n      ChangeArticle({ \n        articleId: int_articleId, \n        title: this.title,\n        categoryId: this.categoryId,\n        summary: this.summary,\n        content: this.mdContent,\n        })\n        .then(() => {\n          this.showModal = true;\n          window.localStorage.removeItem(\"_article\");\n        })\n        .catch(() => {});\n    },\n    autoSave() {\n      if (\n        this.title.length ||\n        this.category.length ||\n        this.mdContent.length ||\n        this.summary.length\n      ) {\n        this.setLocalStorage();\n        this.$message.success(\"自动保存成功！\");\n      }\n      this.timer = setTimeout(this.autoSave, 1000 * 60);\n    },\n    modalLocalStorageClickCancel() {\n      this.showLocalStorageModal = false;\n      window.localStorage.removeItem(\"_article\");\n      this.autoSave();\n    },\n    modalLocalStorageClickOk() {\n      this.showLocalStorageModal = false;\n      let articleData = JSON.parse(window.localStorage.getItem(\"_article\"));\n      this.title = articleData.title;\n      this.category = articleData.category;\n      this.summary = articleData.summary;\n      this.mdContent = articleData.mdContent;\n      this.categoryId = articleData.categoryId\n      this.autoSave();\n    },\n    checkIsSameAsLocalStorage() {\n      if (window.localStorage.getItem(\"_article\")) {\n        let articleData = JSON.parse(window.localStorage.getItem(\"_article\"));\n        if (\n          articleData.title !== this.title ||\n          // articleData.category.join(\"\") !== this.category.join(\"\") ||\n          articleData.category !== this.category ||\n          articleData.mdContent !== this.mdContent ||\n          articleData.summary !== this.summary\n        ) {\n          this.showLocalStorageModal = true;\n        } else {\n          this.autoSave();\n        }\n      } else {\n        this.autoSave();\n      }\n    },\n    // uploadImgClick() {\n    //   this.$refs.imgInput.click();\n    // },\n    // uploadImg(event) {\n    //   let files = event.target.files;\n    //   if (files.length === 0) {\n    //     return;\n    //   }\n    //   let file = files[0];\n\n    //   //文件名(加一个前缀相当于目录)\n    //   let filename = \"mdImg/\" + btoa(Date.now()) + file.name;\n    //   let putExtra = {\n    //     fname: filename,\n    //     params: {},\n    //     mimeType: null\n    //   };\n    //   let completeUrl = \"\";\n    //   let self = this;\n\n    //   let observer = {\n    //     next(res) {\n    //       console.log(res);\n    //     },\n    //     error(err) {\n    //       console.log(err);\n    //     },\n    //     complete(res) {\n    //       let { key } = res;\n    //       completeUrl = `${Domain}/${key}`;\n    //       self.mdContent += `![${filename}](${completeUrl})`;\n    //       let imgData = {\n    //         filename,\n    //         url: completeUrl\n    //       };\n    //       SaveImg(imgData).then(() => {\n    //         self.$message.success(\"图片上传成功！\");\n    //       });\n    //     }\n    //   };\n    //   GetQiniuToken().then(res => {\n    //     let token = res.data.resData.qiniuToken;\n    //     let observable = qiniu.upload(file, filename, token, putExtra, config);\n    //     observable.subscribe(observer);\n    //   });\n    // },\n    modalClickOk() {\n      this.$router.push({ path: \"/admin\" });\n    },\n    getCategoryList() {\n      GetCategoryList()\n        .then(res => {\n          // console.log(res)\n          let data = res.data.data;\n          this.categoryList = data.categoryList;\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    },\n    // 下拉框对应单击事件\n    handleCommand(command) {\n      // this.$message('click on item ' + command);\n      this.category = command.Name;\n      let categoryId = command.C_id\n      this.categoryId = categoryId\n    },\n    \n  },\n  computed: {\n    htmlText() {\n      return Marked(this.mdContent);\n    }\n  },\n  mounted() {\n    Marked.setOptions({\n      renderer: new Marked.Renderer(),\n      smartLists: true,\n      highlight: function(code) {\n        return highlight.highlightAuto(code).value;\n      }\n    });\n\n    let mdContent = this.$refs.mdContent.$el;\n    let _this = this;\n    mdContent.addEventListener(\n      \"scroll\",\n      function() {\n        let realArea = this.children[0];\n        let scrollTop = realArea.scrollTop;\n        let scrollHeight = realArea.scrollHeight - realArea.offsetHeight;\n        let htmlContent = _this.$refs.htmlContent;\n        htmlContent.scrollTop =\n          (htmlContent.scrollHeight - htmlContent.offsetHeight) *\n          (scrollTop / scrollHeight);\n      },\n      true\n    );\n  },\n  created() {\n    if (!this.isNew) {\n      // console.log(this.articleId)\n      this.getCategoryList();\n      GetArticle({ articleId: this.articleId }).then(res => {\n        // console.log(res);\n        let articleData = res.data.data.article;\n        this.title = articleData.Title;\n        this.category = articleData.Name;\n        this.mdContent = articleData.Content;\n        this.summary = articleData.Summary;\n        this.categoryId = articleData.CategoryId;\n        this.checkIsSameAsLocalStorage();\n      });\n    } else {\n      this.getCategoryList();\n      this.checkIsSameAsLocalStorage();\n    }\n  },\n  beforeDestroy() {\n    clearTimeout(this.timer);\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@//assets/css/md2html\";\n@import \"~highlight.js/styles/atom-one-light.css\";\n\n.editor {\n  padding: 10px 0 20px;\n\n  .editor-row {\n    width: 100%;\n    padding: 6px 10px;\n    text-align: left;\n\n    .title-input {\n      width: 500px;\n    }\n  }\n\n  .content-md {\n    position: relative;\n\n    .img-upload {\n      position: absolute;\n      bottom: 4px;\n      right: 20px;\n      text-align: right;\n    }\n\n    .icon {\n      font-size: 28px;\n      cursor: pointer;\n    }\n\n    .img-form {\n      position: relative;\n      margin: 0 0 1% 20%;\n      width: 80%;\n      height: 100px;\n      border: 1px dashed rgba(0, 0, 0, 0.08);\n      background: rgba(255, 255, 255, 0.8);\n\n      &:hover {\n        border-color: rgba(0, 0, 0, 0.5);\n      }\n    }\n\n    .img-input {\n      opacity: 0;\n      width: 60%;\n    }\n\n    .img-content {\n      position: absolute;\n      top: 0;\n      left: 0;\n      box-sizing: border-box;\n      padding: 20px 0 0 0;\n      text-align: center;\n      width: 100%;\n      height: 100%;\n      cursor: pointer;\n    }\n\n    .text {\n      margin-bottom: 10px;\n    }\n  }\n\n  .content-textarea {\n    & > textarea {\n      height: 700px;\n      resize: none;\n    }\n  }\n\n  .digest-textarea {\n    & > textarea {\n      resize: none;\n    }\n  }\n\n  .content-show {\n    border: 1px solid #dcdee2;\n    height: 700px;\n    resize: none;\n  }\n}\n\n.el-dropdown-link {\n  cursor: pointer;\n  color: #409eff;\n}\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n</style>\n"]}]}
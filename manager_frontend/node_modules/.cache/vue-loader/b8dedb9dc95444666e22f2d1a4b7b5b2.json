{"remainingRequest":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/joey/joey/go_project/blog/manager_frontend/src/views/admin/management.vue?vue&type=style&index=0&id=1c5ed19d&lang=scss&scoped=true&","dependencies":[{"path":"/Users/joey/joey/go_project/blog/manager_frontend/src/views/admin/management.vue","mtime":1592379437489},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/joey/joey/go_project/blog/manager_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5tYW5hZ2VtZW50IHsKICBwYWRkaW5nOiA2MHB4IDIwcHg7CiAgbWFyZ2luOiAwIGF1dG87CiAgbWF4LXdpZHRoOiAxMjY0cHg7CiAgLnBhZ2UgewogICAgbWFyZ2luLXRvcDogMjBweDsKICB9CiAgLmJ0biB7CiAgICBtYXJnaW46IDZweCAwOwogIH0KfQo="},{"version":3,"sources":["management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"management.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n  <div class=\"management\">\n    <el-table :data=\"formatArticles\" border>\n      <el-table-column\n        align=\"center\"\n        fixed\n        prop=\"title\"\n        label=\"标题\"\n        min-width=\"200\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"tag\"\n        label=\"标签\"\n        min-width=\"100\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"createDate\"\n        label=\"创建时间\"\n        min-width=\"120\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"updateDate\"\n        label=\"最后编辑时间\"\n        min-width=\"120\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"viewCount\"\n        label=\"阅读量\"\n        min-width=\"80\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        prop=\"commentCount\"\n        label=\"评论数\"\n        min-width=\"80\"\n      ></el-table-column>\n      <el-table-column\n        align=\"center\"\n        fixed=\"right\"\n        label=\"编辑\"\n        min-width=\"200\"\n      >\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            size=\"small\"\n            @click=\"handleModify(scope.$index)\"\n            >编辑</el-button\n          >\n          <!-- <el-button\n            type=\"primary\"\n            size=\"small\"\n            @click=\"handleTypeChange(scope.$index)\"\n            >切换</el-button\n          > -->\n          <el-button\n            type=\"error\"\n            size=\"small\"\n            @click=\"handleRemove(scope.$index)\"\n            >删除</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"page\">\n      <el-pagination\n        background\n        prev-text=\"上一页\"\n        next-text=\"下一页\"\n        layout=\"prev, pager, next\"\n        :total=\"total\"\n        :page-size=\"pageSize\"\n        @current-change=\"handleCurrentChange\"\n      ></el-pagination>\n    </div>\n    <el-dialog title=\"提示\" :visible.sync=\"confirmRemove\" width=\"30%\">\n      <span>确定删除吗？</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"confirmRemove = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"dialogClickOk\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { formatDate } from \"@/utils/formatDate\";\nimport { GetArticleList,RemoveArticle } from \"@/api/management\";\n\nexport default {\n  data() {\n    return {\n      total: 0,\n      page: 1,\n      pageSize: 10,\n      articles: [],\n      confirmRemove: false,\n      removeId: \"\"\n    };\n  },\n  computed: {\n    formatArticles() {\n      return this.articles.map(val => {\n        let list = {};\n        list._id = val.ArticleId;\n        list.title = val.Title;\n        list.tag = val.Name\n        list.createDate = formatDate(new Date(val.CreateTime), \"yyyy-MM-dd hh:mm\");\n        list.updateDate = formatDate(new Date(val.UpdatedAt), \"yyyy-MM-dd hh:mm\");\n        // list.lastDate = formatDate(\n        //   new Date(val.lastDate || list.date),\n        //   \"yyyy-MM-dd hh:mm\"\n        // );\n        list.viewCount = val.ViewCount;\n        list.commentCount = val.CommentCount\n        // list.type = val.type === 1 ? \"私密\" : \"公开\";\n        return list;\n      });\n    }\n  },\n  created() {\n    this.loadArticles();\n  },\n  methods: {\n    loadArticles() {\n      let param = {\n        page: this.page,\n        pageSize: this.pageSize\n      };\n      GetArticleList(param).then(res => {\n        // console.log(res)\n        let data = res.data;\n        this.$nextTick(function() {\n          this.total = data.data.total;\n          this.articles = data.data.articleList;\n        });\n      });\n    },\n    handleModify(index) {\n      let id = this.articles[index].ArticleId;\n      this.$router.push({ path: \"modifyArticle\", query: { _id: id } });\n    },\n    // handleTypeChange(i) {\n    //   let id = this.articles[i]._id;\n    //   let newData = this.articles[i].type === 1 ? { type: 0 } : { type: 1 };\n    //   ChangeState({ _id: id, newData: newData })\n    //     .then(() => {\n    //       this.$message.success(\"切换成功!\");\n    //       this.articles[i].type = 1 ^ this.articles[i].type;\n    //     })\n    //     .catch(() => {});\n    // },\n    handleRemove(index) {\n      this.confirmRemove = true;\n      this.removeId = this.articles[index].ArticleId;\n      // console.log(this.removeId)\n      \n    },\n    dialogClickOk() {\n      this.confirmRemove = false;\n      \n      RemoveArticle({ articleId: this.removeId })\n        .then(() => {\n          this.$message.success(\"删除成功!\");\n          this.loadArticles();\n        })\n        .catch(() => {});\n    },\n    handleCurrentChange(val) {\n      this.page = val;\n      this.loadArticles();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.management {\n  padding: 60px 20px;\n  margin: 0 auto;\n  max-width: 1264px;\n  .page {\n    margin-top: 20px;\n  }\n  .btn {\n    margin: 6px 0;\n  }\n}\n</style>\n"]}]}